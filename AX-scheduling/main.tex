\include{include/header}
%\include{include/macros}

\begin{document}
\IEEEoverridecommandlockouts

\title{%IEEE~802.11ax Uplink Scheduler to Minimize Delay: a Classic Problem with New Constraints
Scheduling Problem for OFDMA Uplink \\in IEEE 802.11ax Networks
\thanks{The research was supported by the Russian Science Foundation (agreement No 16-19-10687).}}

\author{
\IEEEauthorblockN{Dmitry Bankov, Andre Didenko, Evgeny Khorov, Vyacheslav Loginov, Andrey Lyakhov}
\IEEEauthorblockA{Institute for Information Transmission Problems, Russian Academy of Sciences, Moscow, Russia\\
Email: \{bankov, dida, khorov, loginov, lyakhov\}@iitp.ru}
}

\maketitle

\begin{abstract}
In the modern world to have a high-speed Internet connection is already more a necessity than a luxury. 
But in current realities, a wireless connection does not work well in dense networks. 
So new generation of Wi-Fi devices is coming due to development of the standard IEEE 802.11ax, which should be publicly released in a couple of years. 
This new standard has the challenging goal of improving performance indicators such as throughput per user, spectral efficiency, etc. 
It takes the best of Wi-Fi and adds technology from cellular technologies, hence combination of both technologies will be key in designing the best performing IEEE 802.11ax solutions. The most ground-breaking technology taken from 4G is OFDMA which gives opportunity for Access Point to serve several users simultaneously with frequency division. 
It gives rise to the problem of a resource planning in Wi-Fi networks with new constraints.
In this paper we investigate the scheduling problem, study peculiarities of this technology union in Wi-Fi and offer a new type of schedulers.
Also we show a way to adapt traditional schedulers to  IEEE 802.11ax networks.
\end{abstract}

\begin{IEEEkeywords}
Wi-Fi, IEEE 802.11ax, High Efficiency WLAN, OFDMA, Scheduling
\end{IEEEkeywords}

\section{Introduction}

Wireless networks have become an indispensable thing in the modern world.
Nowadays, Wireless Local Area Network (WLAN) is believed to be the most popular technology for information transmission. 
It is not surprising. 
People can go online literally anywhere --- in a restaurant, cafe, shopping center, park, public transport, airport, at work and, of course, at home. 
The main concern is just to be within the range of the access point. 
Such popularity of this technology has led to the problem of congestion of Wi-Fi networks, when one network interrupts the signal of another. 
To cope with this and many other circumstances, IEEE 802 LAN/MAN Standard committee is developing a new amendment for Wi-Fi standard: IEEE 802.11ax (further in the paper referred to as 11ax). 

This amendment provides various ways to improve the efficiency of Wi-Fi, some of which are borrowed from cellular technology.
One of such most significant enhancements of 11ax is the usa\-ge of Orthogonal Frequency-Division Multiple Access (OFDMA). 
It allows the Wi-Fi Access Point (AP) to service several stations (STA) simultaneously, to better cope with fading and, in case of uplink transmission, to improve the spectral power density. In a cost of that the 11ax will provide only a flexible framework so developers need to determine effective schedule algorithms for this OFDMA system while its effectiveness fully depends on the resource management.   

The resource management problem itself has been studied well in other OFDMA-systems, like cellular networks, for which this technology is not new. We can borrow some ideas from them as well as 11ax borrows OFDMA technology from cellular networks and implement 11ax Wi-Fi adaptation for known schedulers considering OFDMA features in Wi-Fi which impose some difficult constraints.  

In this paper, we analyze problems that arise while developing the schedulers for 11ax networks and introduce our method to allocate resources in general clue. 

ha

ha

ha

ha

ha

ha

ha

ha

ha

ha

ha

ha

ha

The rest of the paper is organized as follows.
Section~\ref{sec:features} briefly describes the basic OFDMA features in 11ax networks.
Section~\ref{sec:related} provides an overview on related papers.
Network scenario is shown in Section~\ref{sec:scenario}.
In Section~\ref{sec:scheduling}, we cover scheduling problem in 11ax networks and describe main principles of developed 11ax schedulers.
In Section~\ref{sec:adaptations}, we illustrate a way to adapt known schedulers for 11ax networks.
In Section~\ref{sec:numerical}, we demonstrate and discuss numerical results. 
Section~\ref{sec:conclusion} concludes the paper.
\section{OFDMA features in 11ax}
\label{sec:features}

Data transmission in Wi-Fi with OFDMA has a number of peculiarities which make it different from data transmission in 4G, although it also uses OFDMA.

\subsection{Channelization in 802.11ax}
The available channel can be split into sets of OFDMA subcarriers called resource units (RUs).
The 11ax defines RUs that consist of 26, 52, 106, 242, 484, 996 and $2\times996$ OFDM tones.
The set of available RUs depends on the channel width, e.g., in a \SI{40}{\MHz} channel the STAs can use RUs with up to 484 tones.
A wide RUs can be split into narrower RUs: 52-tone, 106-tone RU and 484-tone RUs can be split in two approximately twice-narrower RUs from available set, while 242-tone and 996-tone RUs are split into three RBs (see Fig.~\ref{fig:resource_units}).
Note that these the divisions of the RUs can be made independently from others. 

The scheduler can allocate only one RU to a STA, but it can vary the RU size for each STA according to the aforementioned limitations.
In other words we have 37 26-tone RUs and certain groups of 2, 4, 9, 18 or all 37 of them can be united in order to obtain larger RUs.
According to the standard, such a limitation appears because of the need to have service tones next to each allocated RU of any size. 
Note that position of these divided RBs is declared in standard and cannot be arbitrary.
For example, as shown at Fig.~\ref{fig:resource_units} two first RUs are united in one 52-tone RU, but we cannot unite the second and the third ones.


\begin{figure}[tb]
	\centering
	\begin{scaletikzpicturetowidth}{0.5\textwidth}
	\begin{tikzpicture}[scale = \tikzscale]
	
	%\tikzset{primarynode/.style={isosceles triangle, draw, inner sep=0pt, anchor=left corner, shape border rotate=90, font=\small, fill=gray!25, isosceles triangle stretches, minimum height = 0.8cm,minimum width=0.36cm}}
	
	%\node [primarynode] at (-0.36,4.0) {1};
		
	\draw [line width=0.2mm] (0.00, 0.00) rectangle (9.00, 0.80);
	\node [text width=1.5cm, align=center] at (4.0,  0.4) {484};
	\node [text width=1.5cm, align=center] at (5.0,  0.4) {tones};
	
	\draw [line width=0.2mm] (0.00, 1.0) rectangle (4.50, 1.8);
	\draw [line width=0.2mm] (4.50, 1.0) rectangle (9.00, 1.8);
	\node [text width=1.5cm, align=center] at (2.5,  1.4) {242};
	\node [text width=1.5cm, align=center] at (7.0,  1.4) {242};
	
	\draw [line width=0.2mm] (0.00, 2.0) rectangle (2.00, 2.8);
	\draw [line width=0.2mm] (2.00, 2.0) rectangle (2.50, 2.8);
	\draw [line width=0.2mm] (2.50, 2.0) rectangle (4.50, 2.8);
	\draw [line width=0.2mm] (4.50, 2.0) rectangle (6.50, 2.8);
	\draw [line width=0.2mm] (6.50, 2.0) rectangle (7.00, 2.8);
	\draw [line width=0.2mm] (7.00, 2.0) rectangle (9.00, 2.8);
	\node [text width=1.5cm, align=center] at (1.0,  2.4) {106};
	\node [text width=1.5cm, align=center] at (2.25, 2.4) {26};
	\node [text width=1.5cm, align=center] at (3.5,  2.4) {106};
	\node [text width=1.5cm, align=center] at (5.5,  2.4) {106};
	\node [text width=1.5cm, align=center] at (6.75, 2.4) {26};
	\node [text width=1.5cm, align=center] at (8.0,  2.4) {106};
	
	\draw [line width=0.2mm] (0.00, 3.0) rectangle (1.00, 3.8);
	\draw [line width=0.2mm] (1.00, 3.0) rectangle (2.00, 3.8);
	\draw [line width=0.2mm] (2.00, 3.0) rectangle (2.50, 3.8);
	\draw [line width=0.2mm] (2.50, 3.0) rectangle (3.50, 3.8);
	\draw [line width=0.2mm] (3.50, 3.0) rectangle (4.50, 3.8);
	\draw [line width=0.2mm] (4.50, 3.0) rectangle (5.50, 3.8);
	\draw [line width=0.2mm] (5.50, 3.0) rectangle (6.50, 3.8);
	\draw [line width=0.2mm] (6.50, 3.0) rectangle (7.00, 3.8);
	\draw [line width=0.2mm] (7.00, 3.0) rectangle (8.00, 3.8);
	\draw [line width=0.2mm] (8.00, 3.0) rectangle (9.00, 3.8);
	\node [text width=1.5cm, align=center] at (0.5,  3.4) {52};
	\node [text width=1.5cm, align=center] at (1.5,  3.4) {52};
	\node [text width=1.5cm, align=center] at (2.25, 3.4) {26};
	\node [text width=1.5cm, align=center] at (3.0,  3.4) {52};
	\node [text width=1.5cm, align=center] at (4.0,  3.4) {52};
	\node [text width=1.5cm, align=center] at (5.0,  3.4) {52};
	\node [text width=1.5cm, align=center] at (6.0,  3.4) {52};
	\node [text width=1.5cm, align=center] at (6.75, 3.4) {26};
	\node [text width=1.5cm, align=center] at (7.5,  3.4) {52};
	\node [text width=1.5cm, align=center] at (8.5,  3.4) {52};
	
	\draw [line width=0.2mm] (0.00, 4.0) rectangle (0.50, 4.8);
	\draw [line width=0.2mm] (0.50, 4.0) rectangle (1.00, 4.8);
	\draw [line width=0.2mm] (1.00, 4.0) rectangle (1.50, 4.8);
	\draw [line width=0.2mm] (1.50, 4.0) rectangle (2.00, 4.8);
	\draw [line width=0.2mm] (2.00, 4.0) rectangle (2.50, 4.8);
	\draw [line width=0.2mm] (2.50, 4.0) rectangle (3.00, 4.8);
	\draw [line width=0.2mm] (3.00, 4.0) rectangle (3.50, 4.8);
	\draw [line width=0.2mm] (3.50, 4.0) rectangle (4.00, 4.8);
	\draw [line width=0.2mm] (4.00, 4.0) rectangle (4.50, 4.8);
	\draw [line width=0.2mm] (4.50, 4.0) rectangle (5.00, 4.8);
	\draw [line width=0.2mm] (5.00, 4.0) rectangle (5.50, 4.8);
	\draw [line width=0.2mm] (5.50, 4.0) rectangle (6.00, 4.8);
	\draw [line width=0.2mm] (6.00, 4.0) rectangle (6.50, 4.8);
	\draw [line width=0.2mm] (6.50, 4.0) rectangle (7.00, 4.8);
	\draw [line width=0.2mm] (7.00, 4.0) rectangle (7.50, 4.8);
	\draw [line width=0.2mm] (7.50, 4.0) rectangle (8.00, 4.8);
	\draw [line width=0.2mm] (8.00, 4.0) rectangle (8.50, 4.8);
	\draw [line width=0.2mm] (8.50, 4.0) rectangle (9.00, 4.8);
	\node [text width=1.5cm, align=center] at (0.25, 4.4) {26};
	\node [text width=1.5cm, align=center] at (0.75, 4.4) {26};
	\node [text width=1.5cm, align=center] at (1.25, 4.4) {26};
	\node [text width=1.5cm, align=center] at (1.75, 4.4) {26};
	\node [text width=1.5cm, align=center] at (2.25, 4.4) {26};
	\node [text width=1.5cm, align=center] at (2.75, 4.4) {26};
	\node [text width=1.5cm, align=center] at (3.25, 4.4) {26};
	\node [text width=1.5cm, align=center] at (3.75, 4.4) {26};
	\node [text width=1.5cm, align=center] at (4.25, 4.4) {26};
	\node [text width=1.5cm, align=center] at (4.75, 4.4) {26};
	\node [text width=1.5cm, align=center] at (5.25, 4.4) {26};
	\node [text width=1.5cm, align=center] at (5.75, 4.4) {26};
	\node [text width=1.5cm, align=center] at (6.25, 4.4) {26};
	\node [text width=1.5cm, align=center] at (6.75, 4.4) {26};
	\node [text width=1.5cm, align=center] at (7.25, 4.4) {26};
	\node [text width=1.5cm, align=center] at (7.75, 4.4) {26};
	\node [text width=1.5cm, align=center] at (8.25, 4.4) {26};
	\node [text width=1.5cm, align=center] at (8.75, 4.4) {26};
	
	%\node [text width=1.5cm, align=center] at (4.5, 8.8) {DC};
	%\draw [line width=0.5mm, dashed] (4.5, 1.0) -- (4.5, 8.5);
	
	%\draw [line width=0.5mm, dashed] (0.0, 4.0) -- (0.0, 8.5);
	%\draw [line width=0.5mm, dashed] (2.0, 4.0) -- (2.0, 8.5);
	%\draw [line width=0.5mm, dashed] (2.5, 4.0) -- (2.5, 8.5);
	%\draw [line width=0.5mm, dashed] (4.5, 4.0) -- (4.5, 8.5);
	
	\end{tikzpicture}
	\end{scaletikzpicturetowidth}
	\caption{\label{fig:resource_units} RU locations in \SI{40}{\MHz} channel}
	\vspace{-0.5em}
\end{figure}

The size of an RU determines the set of modulation-coding schemes (MCSs) that can be used for transmission in the RU.
For example, the standard prohibits usage of the novel 1024-QAM in small RUs.
At the same time, for each RU width, the standard defines the minimal receiver sensitivity to signal transmitted with a specific MCS, and the faster the MCS, the higher is the sensitivity threshold.
As the result, a STA cannot use high-speed MCSs if it has poor channel conditions.

\begin{table}[t]
	{\centering
		\caption{\label{table:RUdatarate} Data rate in different RU at each MCS in Mbps}
		\resizebox{\columnwidth}{!}{
			\setlength\tabcolsep{1.5pt} % default value: 6pt
			\begin{tabular}{|c|c|c|c|c|c|c|c|}
				\hline
				&\scriptsize\textbf{MCS}	& \scriptsize26-tone  & \scriptsize52-tone  & \scriptsize106-tone  & \scriptsize242-tone  & \scriptsize484-tone  & \scriptsize996-tone  \\
				\hline
				1 & BPSK, 1/2	&0.8	&1.7	&3.5	&8.1 & 16.3 &34		\\
				2 & QPSK, 1/2	&1.7	&3.3	&7.1	&16.3 & 32.5 &68.1		\\
				3 & QPSK, 3/4	&2.5	&5	&10.6	&24.4 & 48.8 &102.1		\\
				4 & 16-QAM, 1/2	&3.3	&6.7	&14.2	&32.5 & 65 &136.1		\\
				5 & 16-QAM, 3/4	&5	&10	&21.3	&48.8 & 97.5 &204.2		\\
				6 & 64-QAM, 2/3	&6.7	&13.3	&28.3	&65 & 130 &272.2		\\
				7 & 64-QAM, 3/4	&7.5	&15	&31.9	&73.1 & 146.3 &306.3		\\
				8 & 64-QAM, 5/6	&8.3	&16.7	&35.4	&81.3 & 162.5 &340.3		\\
				9 & 256-QAM, 3/4	&10	&20	&42.5	&97.5 & 195 &408.3		\\
				10 & 256-QAM, 5/6	&11.1	&22.2	&47.2	&108.3 & 216.7 &453.7		\\
				11 & 1024-QAM, 3/4	& --	&--	&--	&121.9 & 243.8 &510.4		\\
				12 & 1024-QAM, 5/6 	& --	&--	&--	&135.4 & 270.8 &576.1		\\
				\hline
			\end{tabular}
		}
	}
\end{table}		

\todo{хочу таблицу справа сверху}
A wider RU does not necessarily mean that the STA transmits at greater speed.
A STA uses the same transmission power both for wide and narrow RUs, which results in greater signal-to-noise ratio ($SNR$) values for narrow RUs.
As the result, in a narrow RU it can use higher MCSs which can yield greater summary transmission rate. 
Data rates of MCSs used in the 11ax are indicated in Table~\ref{table:RUdatarate}. 

Another problem is that to make it possible to use OFDMA all STAs should transmit with the same synchronized MCS. There is one exception in this rule: when we use 1024-QAM in big RUs we still can transmit data in smaller ones with 256-QAM. 
\todo{развернуто про мощность}
In order to enable the AP to successfully receive the signal from several STAs, these STAs should transmit with such power that the incoming signal is the same at the AP.

Such constraints complicate scheduling problem in 11ax networks.

\subsection{Data Transmission Sequence}
\todo{дописать + про информацию о мощности впилить, плюс упомянуть гораздо выше что это все аплинк}
To organize data transmission process in UL with OFDMA, the AP transmits Trigger Frames, in which it includes the scheduling information (see Fig. \ref{fig:transmission}).
Specifically, for each allocated RU it adds a User Info element that indicates the RU, the MCS that should be used in that RU and the AID of the designated STA.
If the AID is $0$, then the RU is allocated for random access, which can be used by STAs to request channel resources from the AP.

\begin{figure*}[t]
	\centering{
		\begin{tikzpicture}
		\small
		
		\draw [arrows={-triangle 45}] (0,1) -- (15,1);
		\draw [arrows={-triangle 45}] (0,1) -- (0,5);
		\node at (15,  0.5) {\textit{Time}};
		\node at (1,  5) {\textit{Frequency}};
		
		\draw [line width=0.5mm] (1, 1) rectangle (2, 4.5);
		\node [text width=1.5cm, align=center] at (1.5,  2.75) {TF 1};
		
		\draw (2.0,  0.5) -- (2.0,  1.0);
		\draw (3.0,  0.5) -- (3.0,  1.0);
		\draw [arrows={triangle 45-triangle 45}] (2.0,0.5) -- (3.0,0.5);
		\node at (2.5, 0.2) {$SIFS$};
		
		\draw [line width=0.5mm] (3, 1.0) rectangle (5, 1.5);
		\draw [line width=0.5mm] (3, 1.5) rectangle (5, 2.0);
		\draw [line width=0.5mm] (3, 2.0) rectangle (5, 2.5);
		\draw [line width=0.5mm] (3, 2.5) rectangle (5, 3.0);
		\draw [line width=0.5mm] (3, 3.0) rectangle (5, 3.5);
		\draw [line width=0.5mm] (3, 3.5) rectangle (5, 4.0);
		\draw [line width=0.5mm] (3, 4) rectangle (5, 4.5);
		
		\node [text width=2cm, align=center] at (4, 1.25) {RB 1};
		\node [text width=2cm, align=center] at (4, 1.75) {...};
		\node [text width=2cm, align=center] at (4, 2.25) {RB $F_1$};
		\node [text width=2cm, align=center] at (4, 2.75) {RB $F_1+1$};
		\node [text width=2cm, align=center] at (4, 3.25) {RB $F_1+2$};
		\node [text width=2cm, align=center] at (4, 3.75) {...};
		\node [text width=2cm, align=center] at (4, 4.25) {RB $F_{max}$};
		
		\draw [decorate,decoration={brace,amplitude=8pt,mirror,raise=0.5pt},yshift=0pt]
		(5,1) -- (5,2.5) node [black,midway,xshift=0.55cm] {$RA$};
		\draw [decorate,decoration={brace,amplitude=8pt,mirror,raise=0.5pt},yshift=0pt]
		(5,2.5) -- (5,4.5) node [black,midway,xshift=0.55cm] {$DA$};
		
		\draw (5.0,  0.5) -- (5.0,  1.0);
		\draw (6.0,  0.5) -- (6.0,  1.0);
		\draw [arrows={triangle 45-triangle 45}] (5.0,0.5) -- (6.0,0.5);
		\node at (5.5, 0.2) {$SIFS$};
		
		\draw [line width=0.5mm] (6, 1) rectangle (7, 4.5);
		\node [text width=1.5cm, align=center] at (6.5,  2.75) {MSBA};
		
		\draw (7.0,  0.5) -- (7.0,  1.0);
		\draw (8.0,  0.5) -- (8.0,  1.0);
		\draw [arrows={triangle 45-triangle 45}] (7.0,0.5) -- (8.0,0.5);
		\node at (7.5, 0.2) {$AIFS$};
		
		\draw[draw = none,pattern=checkerboard light gray, pattern color=black] (8,1) rectangle (12,3.5);
		\draw [line width=0.5mm] (8, 1) rectangle (12, 3.5);
		\node [text width=3cm, align=center] at (10,  2.25) {EDCA TRANSMISSIONS};
		
		\draw (12.0,  0.5) -- (12.0,  1.0);
		\draw (13.0,  0.5) -- (13.0,  1.0);
		\draw [arrows={triangle 45-triangle 45}] (12.0,0.5) -- (13.0,0.5);
		\node at (12.5, 0.2) {$SIFS$};
		
		\draw [line width=0.5mm] (13, 1) rectangle (14, 4.5);
		\node [text width=3cm, align=center] at (13.5,  2.75) {TF 2};	
		\node [text width=1.5cm, align=center] at (14.5, 2.75) {...};
		
		\end{tikzpicture}}
	\caption{\label{fig:transmission} Frame handshake for UL OFDMA transmission (NEED TO CHECK).}
	\vspace{-0.5em}
\end{figure*}

\section{Related Works}
\label{sec:related}
\todo{написать}
Despite the fact that 11ax is expected to be finished by 2019, it has been already studied a lot in the literature.

\section{Network Scenario and Problem Statement}
\label{sec:scenario}

\begin{figure}[t]
	\includegraphics[width = 0.4\textwidth]{NetworkScenario}
	\caption{\label{fig:scenario} The network scenario}
\end{figure}

The considered Wi-Fi network scenario is shown in Fig~\ref{fig:scenario}. A group of $N$ STAs (STA) is associated to the Access point (AP). 
From time to time, STAs generate finite data flows to be delivered to the AP. Apart from that, we assume each STA to have only one flow.

We study UL scheduling problem in deterministic access, so let STAs transmit their BSR in EDCA transmissions period, so there is no need for AP to allocate resources for RA during trigger-interval.
Also we have several defined schedulers for deterministic access (which will be discussed later on). 
Let time unit be the period with which the AP broadcasts trigger-frames.
So each time unit scheduler allocates resources for associated users in a certain way.

Users' STAs are transmitting data in uplink using OFDMA. 
It means that STAs should transmit their data with synchronized MCS and that AP should choose this MCS and allocate RUs satisfying the OFMA features described above. 

Consider the network operates in a \SI{40}{\MHz} channel at 5 GHz. Hence, we have RUs' location shown in Fig.~\ref{fig:resource_units}. 
Also correspondence of RUs and given rates is demonstrated at Table.~\ref{table:RUdatarate}.

Problem statement: \textit{to adapt known schedulers which work in traditional cellular networks to 11ax networks.}

\section{Scheduling in 11ax}
\label{sec:scheduling}

Usually, it is formulated as the following optimization problem.
Consider a network described in section~\ref{sec:scenario}.
Each time unit, the AP runs defined scheduler which allocates $M$ RUs to some STAs in order to maximize some network-wide utility function~$U$ where $M$ is a total number of RUs in chosen set of RUs. 
For example, if scheduler chooses the following RU set: 242, 106, 26, 52, 26, 26-tones RUs to STAs respectively then $M = 6$. 
Note that utility function intuitively should be $U = U(RU set, allocation, mcs)$ here because as it was shown in section~\ref{sec:features} that several performance indicators can vary greatly depending on allocation of RU set and chosen MCS.

\todo{через cite}
As justified in \{Scheduling Algorithms for Multicarrier Wireless
Data Systems
Matthew Andrews and Lisa Zhang\}, in multi resource unit systems like OFDMA, we can represent the utility function $U(t)$ in the following objective form
\begin{equation}
\label{eq:obj}
U(t) = \sum_{i = 1}^{N} \sum_{j = 1}^{M} x_i^j \lambda_i^j (t)
\end{equation}

where $x_i^j$ is an indicator which equals 1 if STA $i$ is assigned to RU $j$, and 0, otherwise and $\lambda_i^j$ is the scheduler metric value which client STA $i$ has in RU $j$ at time slot $t$. 

It is clear that if STA has no data to transmit right now then it is pointless for the AP to allocate RU for this station. Thus, for convenience we denote $n(t)$ as a number of STAs which have data to transmit at the moment $t$. Let us sort them somehow and let $i\in[1, n(t)]$ be index os STA at the moment $t$. We can reduce the number of terms in the sum above by excluding STAs without data. Also for clearness we sort RUs in ascending order.

For shortness, $X$ is the two-dimensional matrix of $\left\{x_i^j\right\}$ representing RU assignment to the STAs and $C = \{1\dots12\}$ be a set of all MCS (according to the table~\ref{table:RUdatarate}). Let $R$ be a set of all RU configurations. With all aforementioned instructions we can rewrite common optimization problem for fixed RU set $r \in R$ and fixed MCS $c \in c$ for all possible scheduler metrics:

\begin{align} \label{eq:usl311}
\max U_{c, r}(t,X) = \max \sum^{n(t)}_{i = 1} \sum_{j = 1}^{M} x_i^j \lambda_i^j(t); \\ \label{eq:usl312}
\text{subject to} \sum_{i=1}^{n(t)} x_i^j \leq 1,\ \  \forall j \in [1,M]; \\ \label{eq:usl313}
\sum_{j = 1}^{M} x_i^j \leq 1, \ \ \forall i \in [1, n(t)]; \\ \label{eq:usl314}
\sum_{i = 1}^{n(t)} \sum_{j = 1}^{M} x_i^j \leq M,
\end{align}
where conditions~\eqref{eq:usl312}-\eqref{eq:usl314} are related to the OFDMA  constraints described before. 
Namely, \eqref{eq:usl312} represents the fact that one STA cannot be assigned to more than one RU. Condition \eqref{eq:usl313} works in opposite way: one RU cannot be assigned for more than one station. The last condition \eqref{eq:usl314} comes with a total number $M$ of RUs in this fixed RU set.

This problem is known as the assignment problem, which can be resolved in polynomial time using dynamic programming algorithm named as the Hungarian algorithm,~\cite{bourgeois1971extension}.
It also known as the Kuhn-Munkers algorithm. 
Its solution is the assignment $\hat X$, which gives maximum value of $U_{c, r}(t,X)$  for any possible allocation matrix $X$ with fixed RU set and MCS. 
Briefly, the algorithm makes up the matrix $\Lambda = \{\lambda_i^j\}$ and chooses the best $\lambda_i^j$ in each line in order to maximize objective function \ref{eq:usl311}. Example is given in Fig.~\ref{fig:matrixexm} where grey cells of this matrix describe solution $\hat X$. 

With this algorithm the AP can allocate fixed RU set with fixed MCS, but it needs to determine them as well. The best RU set and the best MCS can be chosen among all possible variants by considering them one by one. This is final decision made by the AP. 
The examination of RU set can be hastened by excluding configurations that are obviously worse than the known alternatives, and the examination of MCS should consider only supported mcs and can be hastened by excluding MCSs lower than the highest MCS supported by all stations. It means that we have borders for MCS: $mcs^{*}_{min}$ and $mcs^{*}_{max}$. Let us introduce pseudo-coded Algorithm~\ref{alg:11ax} for 11ax resource scheduler 

\begin{algorithm}
	\caption{General 11ax scheduler algorithm}\label{alg:11ax}
	\begin{algorithmic}[1]
		\Procedure{Scheduler}{}
		\For{$r$ in $\{R\}$}
		\For{$c$ in $[mcs^{*}_{min};mcs^{*}_{max}]$}
		\State $\hat X = HungarianAlg(\Lambda(r, c))$
		\If {$U_{best} < U(\hat X)$}
		\State $U_{best} = U(\hat X)$,
		\State $X_{best} = \hat X$,
		\State $c_{best} = c$,
		\State $r_{best} = r$.
		\EndIf
		\EndFor
		\EndFor
		\State \Return $r_{best}$, $c_{best}$, $X_{best}$
		\EndProcedure
	\end{algorithmic}
\end{algorithm}

\begin{figure}[t]
\centering
\caption{\label{fig:matrixexm} Example on Hungarian algorithm}
\resizebox{0.8\columnwidth}{!}{
\setlength\tabcolsep{4pt} % default value: 6pt
\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
\hline
$x_i^j$& \multicolumn{10}{|c|}{Client Stations, $i$}  \\\hline
\parbox[t]{2mm}{\multirow{7}{*}{\rotatebox[origin=c]{90}{Resource Units, $j$}}} & 2 & 2 & 3 & 6 & 7 & 1 & 3 & \cellcolor{gray!100}6 & 2 & 6 \\\cline{2-11}
& 1 & 4 & 5 & 8 & \cellcolor{gray!100}9 & 5 & 3 & 8 & 5 & 1 \\\cline{2-11} 
& \cellcolor{gray!100}9 & 4 & 7 & 5 & 3 & 2 & 6 & 1 & 3 & 1 \\\cline{2-11}
& 2 & 3 & 8 & 4 & 5 & 6 & 1 & 2 & \cellcolor{gray!100}7 & 4 \\\cline{2-11} 
& 7 & 4 & \cellcolor{gray!100}9 & 3 & 7 & 1 & 2 & 8 & 5 & 8 \\\cline{2-11}
& 9 & 7 & 4 & \cellcolor{gray!100}7 & 8 & 2 & 2 & 4 & 3 & 6 \\\cline{2-11}
& 9 & \cellcolor{gray!100}8 & 5 & 6 & 1 & 2 & 4 & 5 & 6 & 7 \\\hline
\end{tabular}
}
\end{figure}

\section{Ax-adaptations of Known Schedulers}
\label{sec:adaptations}

The most widely used utility functions and corresponding schedulers are listed below. 

\subsection{MR}

The AP in legacy Wi-Fi and Base Station (BS) in cellular networks use MR (Max Rate) scheduler in order to maximize  throughput $S(t)$ at current moment $t$. This scheduler considers all client stations and assigns the whole frequency band to a station with the highest nominal data rate $r_i$ of station $i$ in channel.

Scheduler in classic Wi-Fi сan distribute only a time resource.
However, with appearance of 11ax standard the AP can consider channel frequency division too and maximize cumulative throughput $S(t) = \sum S_i(t)$, where $S_i(t)$ is throughput of station $i$ at time instant $t$. We should simply make   
\begin{equation}
\label{eq:lambdamr}
\lambda_i^j (c) = r_i^j (c),\ i \in [1,N],\ j \in [1, M].
\end{equation}
With this equation we get objective function~\eqref{eq:usl311} in a form:
$$
U^{MR}_{c,r}(t,X) = \sum_{i = 1}^{n(t)} \sum_{j = 1}^{M} r_i^j (c)
$$
which maximization obviously gives us allocation with the biggest rate for fixed RU set. Thus, 11ax-MR scheduler should solve \eqref{eq:usl311}-\eqref{eq:usl314} with parameter \eqref{eq:lambdamr}.

\subsection{PF}

PF (Proportional Fair)  scheduler allocates RUs to the STAs in a way which maximizes $\sum_{i}\sum_{j} x_i^j \frac{r_i^j}{Q_i}$ in a time domain, where $Q_i$ is the average service rate, e.g. amount of data transmitted by the STA $i$ divided by its total time in system. This utility function is fully analogical to the objective function \eqref{eq:obj} with
\begin{equation}
\label{eq:pflambda}
\lambda_i^j (c) = \begin{cases}
\frac{r_i^j(c)}{Q_i},\ if\ Q_i \ne 0,\\
0,\ if\ Q_i  = 0;
\end{cases}
\end{equation}

In cellular networks PF algorithms usually consider each RU one-by-one, i.e. for RU $j$ it allocates user who maximize $r_i^j / Q_i$ at time slot $t$. But in a classic Wi-Fi there is only one RU --- the whole channel itself. So we assume that PF in a legacy Wi-Fi works only with this RU.

In cellular networks this exhaustive searches over each RU can be feasible due to fact that all RUs are equal to each other. This assumption is not met in 11ax networks, so the 11ax-PF AP should solve optimization task~\eqref{eq:usl311}-\eqref{eq:usl314} with parameter~\eqref{eq:pflambda}.


\subsection{Shortest Remaining Time First}

SRTF (Shortest Remaining Time First) scheduler

If the channel properties do not change with time, the rate in different RUs is the same and additive, the Shortest Remaining Time First (SRTF) scheduler is proven to provide minimal average upload time. 
The second assumption made to derive such a scheduler is completely incorrect for UL OFDMA transmission in 11ax networks.

But still, simplistically, in classic Wi-Fi and in cellular networks SRTF allocates the whole channel to a user for which $\frac{D_i(t)}{r_i}$ is the minimal one, where $D_i(t)$ is the remaining amount of data of user $i$ and as before $r_i$ is its rate in the whole channel. In other words this scheduler sorts STAs by parameter $\frac{D_i(t)}{r_i}$ and gives all resources to the first one in this sorted list.

11ax adaptation of this scheduler is not a trivial task. So in this subsection we design a novel family of 11ax schedulers called MUTAX, Minimizing Upload Time in 11AX networks, which based on classic SRTF.
While deriving formulae we neglect the effects related to packetization (including aggregation and fragmentation) overhead. Apart from that, for shortness we consider only $n$ STAs with flows and assume that each STA has only one flow. Both STA and flow are denoted as $i, i=1,...,n$.

Let slot be a time interval between two consequent TFs.
It should be noted that slots may have different duration. The maximal one is related to the standard limit of \SI{5484}{\us} for the physical protocol data unit (PPDU) duration. A slot can be shorter, if at least one STA which transmits in this slot has no more data.

The MUTAX algorithm has two steps. At the first step, we order existing flows and calculate the sum upload time of the flows, as if we used exhaustive service.
At the second stage, we try to improve the sum upload time by serving some flows in parallel.
Let us consider the steps in detail.

At the first step, we serve each flows exhaustively.
Except for waiting, the time needed to upload flow $i$ equals $t_i = \frac{D_i}{r_{i}}$. %, where $r_{i}$ is the rate of STA $n$ transmitting in the whole frequency channel.
The first STA finishes delivering its flow by time $t_1$.
The second STA starts right after the first one and delivers its flow by time $t_2 + t_1$, etc.
As the result, the total upload time for existing flows is
\[ T_{step1} = \sum_{i = 1}^{n} \left(n - i\right) t_i. \]
Obviously, to minimize the sum upload time we have to sort the STAs in the ascending order by $t_i$.

At the second step, we divide the channel into several RUs.   
Let $m$ be the number of RUs and $j, 1\le j \le m$ be the index of RU in the considered RU configuration.  
$x_i^j$ is an indicator which equals $1$ if STA $i$ is assigned to RU $j$, and $0$, otherwise.
For shortness, $X$ is the two dimensional matrix of $\left\{x_i^j\right\}$ representing RU assignment to the STAs. 

With defined notation, the total upload time $T\left(X\right) $ of existing flows differs from $T_{step1}$ in the following way. First, the upload time of each of $n$ flows increases by  the current slot duration $\tau$. Second, if $x_i^j=1$, the remaining amount of data of flow $i$ decreases by the amount of data the STA transmits in RU $j$ of the current slot: $\Delta D_i^j = \min\left\{D_i, \tau \times r_{i}^{j}\right\}$. Thus  
\[ T\left(X\right) = n \tau + \sum_{i = 1}^{n} \left(n - i\right) \frac{D_i -  \sum_{k = 1}^{m} x_i^j \Delta D_i^j}{r_{i}} \]


%Leaving out of consideration $n \tau_t$, we can say that to minimize $T\left(X\right)$ we need to sort STAs in the ascending order by $\frac{D_i -  \sum_{k = 1}^{m} x_i^j \Delta D_i^j}{r_{i}}$.

Since both $\tau$ and  $\Delta D_i^j$ depend on the resource allocation $X$, minimization of $T(X)$ requires exhaustive search by possible ways to allocate the RUs to the STAs, and to simplify the task we propose an heuristic approach based on two assumptions.
Firstly, we neglect the change of $n \tau_t$ for different allocations, as a slot cannot be too long due to standard limitations.
Secondly, we sort the STAs in the ascending order by $t_n$ only once, before considering different ways to assign RUs to the STAs.
Under these assumptions, to minimize  $T(X)$, we have to maximize the following expression $\sum_{k = 1}^{m} \sum_{i = 1}^{n } \left(n - i\right) \frac{x_i^j \Delta D_i^j}{r_{i}}$.

Finally, let us denote $\lambda_i^j = \left(n - i\right) \frac{x_i^j \Delta D_i^j}{r_{i}}$ and we can define the following optimization problem:

\section{Numerical Results}
\label{sec:numerical}

\todo{%SRTF allocates the whole channel to the STA which has the lowest remaining time $t_i$.
  некоторые фразочки укрвадены из старой статьи :(}
%\subsection{Channel Model}

We have implemented SRTF, MR and PF schedulers as well as 11ax analogs described in the previous section.

We run simulation in a scenario described in Section \ref{sec:scenario}.

The flow sizes are drawn from truncated lognormal distribution with minimal, average and maximal values of 1 KB, 200 KB, 3 MB respectively. 
When a flow is delivered, the next flow is generated after a random delay drawn from truncated exponential distribution with minimal, average and maximal values of \SI{0.1}{\s}, \SI{0.3}{\s} and \SI{0.6}{\s} respectively.
Also we used the following 802.11ax path-loss model for the residential scenario \cite{presentation_scenarios}:
\begin{multline*}
PL(d) = 40.05 + 20 \lg\left(\frac{f_c}{2.4}\right) + 20 \lg(\min(d, 5)) + \\
+ \mathbb{I}(d > 5) \cdot 35 \lg\left(\frac{d}{5}\right),
\end{multline*}
where $PL$ is the path-loss in dB, $f_c$ is the central frequency in GHz, $d$ is the distance between the devices and $\mathbb{I}{x}$ equals $1$ if $x$ is true and $0$ otherwise.
The AP receives the signal from the STAs with power $P(d)$ calculated as
$$
P(d) = P_0 + 10 \lg\left(\frac{F}{F_{max}}\right) - PL(d),
$$
where $P_0$ is the STA's transmission power, possibly corrected as mentioned in Section~\ref{sec:features}, $d$ is the distance between the STA and the AP, $F$ is the number of tones in the RU, and $F_{max}$ is the maximal number of tones in a RU in the considered channel.

In first set of experiments, the STAs are located uniformly within a small circle of radius $D/2 = \SI{5}{\m}$ around the AP.
In such a case, the channel quality is so high that the all STAs use the maximal MCS to transmit in given RU of any width.
Obviously, in this case OFDMA cannot bring any profit against legacy Wi-Fi which uses the whole channel for transmissions, as its division without changing the MCS cannot increase the data rate according to the Table~\ref{table:RUdatarate} unless MCS  can cope with the noise. The only possible exception here is ax-PF scheduler which tries to serve STAs with fairness, but actually multiplier $r^j_i (c)$ is a lot larger for $c=12$ in 484-tone~RU, compared to other RUs, so even 11ax-PF scheduler decides to allocate the whole channel to one user (need to check).

This result is supported by simulation, see Fig~\ref{fig:10metres}, which shows that if the channel for all STAs is well enough, schedulers which consider channel division yields the same upload time as others (curves coincide for them in this Fig.). Also this result illustrates that schedulers belonging to SRTF-family outperform the PF and MR-families by up to 30\%. 

As we consider traffic model of a closed loop system, along with the reduction of upload time SRTF-based schedulers provide the increase of goodput compared to the other schedulers.

\begin{figure*}[tb]
  \centering
  \includegraphics[width = 0.325\textwidth]{5-d.pdf}
  \includegraphics[width = 0.325\textwidth]{5-e.pdf}
  \includegraphics[width = 0.325\textwidth]{5-t.pdf}
  \caption{\label{fig:10metres}  Upload time, busy channel time ratio and goodput vs the number of STAs in the small circle.}
\end{figure*}

\begin{figure*}[bt]
  \centering
  \includegraphics[width = 0.325\textwidth]{20-d.pdf}
  \includegraphics[width = 0.325\textwidth]{20-e.pdf}
  \includegraphics[width = 0.325\textwidth]{20-t.pdf}
  \caption{\label{fig:20metres} Upload time, busy channel time ratio and goodput vs the number of STAs in the large circle.}
\end{figure*}

The second set of experiments corresponds to the case when STAs are located in a larger circle of radius $D/2 = \SI{20}{\m}$.
Such conditions provide a variety in MCS choice among STAs and RU widths, so it becomes possible to get gain from division the channel between different users.

If in previous set of experiments we could divide schedulers by their family belonging, here OFDMA usage is the main factor of success.
According to simulation results, see Fig.~\ref{fig:20metres}, in this case non-OFDMA schedulers are  much less efficient than channel-splitting schedulers. 
The gap between these two groups increases with the number of client STAs. 
Thus, usage of OFDMA gives advantage compared to non-OFDMA schedulers. 
For example, designed to minimize upload time the classic SRTF works much worse than even 11ax adaptation of PF. 
At the same time, MUTAX and its SO version shows approximately the same upload time as ax-PF and ax-MR, they keep leading position unless number of STAs is less than 20.  

\section{Conclusion}
\label{sec:conclusion}

In the paper, we have studied scheduling problem in 11ax networks, the standard of which is currently under development. Constraints connected to a OFDMA usage and common approach to all possible schedulers for 11ax network were shown here. 
Also we have demonstrated how classic schedulers can be adapted to 11ax networks and numerical results about their performance. 
Meanwhile, a new family of schedulers based on traditional SRTF scheduler was introduced. 
We can admit that MUTAX and MUTAX-SO make some brutal force optimization, they even start to lose to 11ax adaptations of PF and MR with increase in number of associated STAs. 
Thus, this problem should be investigated more deeply, but the main point of this paper stands that the AP can get gain in performance indicators due to division of channel.

\iffalse
\clearpage

\section{OFDMA SLAVA}

UL OFDMA transmission is more challenging, since
OFDMA transmissions of each STAs shall start and end
simultaneously. That is why it starts with a trigger frame in
which the AP allocates RUs to each STA and informs the
STAs about the transmission parameters, e.g. MCS, transmission
duration. Being polled with the trigger frame, each
STA immediately replies with a data frame. The amendment
describes several ways how to meet the requirement on the
transmission duration. For example, advanced aggregation and
fragmentation methods, as well as padding, can be used. After
the UL transmission, the AP replies with a modified ACK
frame, in which the AP acknowledges successfully received
packets or fragments. To notify the AP that the STA has
some data for transmission, it can send a buffer status report
with the legacy channel access method, or as a part of the
described UL OFDMA transmission, or using ALOHA-like
Random OFDMA channel access, which is efficient only for
short transmissions and is not considered in the paper.

\section{OFDMA in IEEE 802.11ax Networks}
\subsection{Main Features}

In contrast to LTE with a rigid traffic-independent time-frequency numerology, in 11ax networks, OFDMA works at the per-frame bases upon native to Wi-Fi Enhanced Distributed Channel Access (EDCA), a sort of decentralized CSMA/CA joint with automatic repeat request. OFDMA frames start with a common preamble, which can be decoded by legacy devices. Having received the preamble, a STA learns the duration of the frame and considers the medium as busy till the end of the frame.
The rest of the frame --- understandable only by 11ax STAs --- can be formed according to OFDMA concept, i.e. various tones of the frame can be assigned to different STAs. 

In LTE networks, a scheduler can allocate an arbitrary subset of downlink (DL) RUs for a user or an arbitrary \emph{interval} of UL RUs for a user.
11ax imposes much stricter constrains on RU selection, since both in DL and UL, a STA cannot be assigned to more than one RU.

An OFDMA frame may contain RUs with different number of tones, however all RUs inside the frame must have the same duration.
For that, the STAs may use novel flexible fragmentation or padding. 

All transmissions inside one OFDMA frame must be synchronized, i.e. start and finish at the same time instants.
This can be easily done in DL, where an OFDMA frame is generated by the Access Point (AP).
However, to provide synchronization for uplink, the AP can use novel Trigger Frame (TF).
SIFS after TF reception, the STAs transmit their parts of UL OFDMA frame.
If needed, the AP acknowledges reception of each part by sending a set of ACKs inside an OFDMA frame or by sending Multi-STA Block Acknowledgment (MSBA).

It is the AP which, for both DL and UL transmissions, determines modulation and coding scheme (MCS), duration, RU assignment and other OFDMA parameters. Such information can be transmitted in frame headers (for DL) and in the Trigger frame (for UL). An example of UL OFDMA transmission is shown in Fig.~\ref{fig:transmission}. 

As mentioned above, 11ax moves decision making logic from the STAs to the AP that determines which STA transmits, when, in which RU, how much data it transmits, etc.
To make a correct decision, the AP needs to be aware of STAs' buffered traffic and channel conditions.
This information can be periodically requested by the AP.
Moreover, to notify the AP about arrived packets, a STA can proactively send so-called Buffer Status Report (BSR).
For that, it can aggregate BSR with a data frame sent in the dedicated RU.
Another option is legacy EDCA.
Thanks to the recent change in the 11ax draft standard, the AP can separately tune EDCA parameters of scheduled STAs in such a way, that they do not contend for the channel with unscheduled STAs.
It means that if a STA does not obtain UL RUs, it likely delivers a BSR at the first transmission attempt because of the extremely low contention.
The third approach to send a BSR is using OFDMA Random Access.
For that, the AP can allocate one or several RUs for random access and the contending STAs will randomly choose one of such RUs. 
Anyway, thanks to these methods, the AP can quickly obtain information about new frames buffered  at the associated STAs and waiting for UL RUs.

OFDMA brings many benefits to 11ax networks.
First it makes transmission more reliable to frequency selective interference and fading.
This is especially important for wide \SI{160}{MHz} channels introduced in 11ac.
Second, with OFDMA we can glue short packets destined for or originated from various STAs, which significantly reduces overhead caused by PHY headers and channel access time and interframe spaces.
Third, for UL transmissions by edge STAs it makes sense to use narrow channels instead of wide ones.
Indeed, since the STAs are spatially separated they can simultaneously transmit at the maximal allowed power without breaking legal limitations on the emitted energy.
Thus, by reducing RU width, we increase power spectral density received from the STAs and can use higher MCS.
In other words, by allowing numerous spatially separated STAs to transmit in parallel, we increase the cumulative received power in comparison to the case when only one STA transmits.
For edge STAs, increasing power spectral density leads to a higher MCS, so  the average amount of data received from an OFDMA frame is higher than that from a legacy.
Thus in contrast to LTE, in 802.11ax networks the rates in UL RUs are non-additive, i.e. if a STA transmits in twice wider RU, it is not guaranteed that it transmits twice more data.
This effect will be carefully investigated in the paper.

While in DL OFDMA just allows AP to transmit data to multiple users simultaneously, OFDMA in the uplink provides more benefits. In particular, independently on the size of RU in which STA is transmitting, STA spends the same amount of power $P_0$. Because of that, with OFDMA the signal power density is increased, so MCS with higher data rate can be used for transmission in narrower RU. As a result, in contrast to LTE, in 802.11ax uplink transmission data rate in different RUs is non-additive, i.e. if a STA transmits in twice wider RU, it is not guaranteed that it achieves twice higher data rate. Moreover, in some cases the achieved data rate can be even smaller.

\clearpage
\section{CONTINIYTUE}


Having received a Trigger Frame, STAs transmit their data frames in designated RUs or in RUs allocated for random access.
The inter-frame space between the STAs' frames and the Trigger Frame is $SIFS$.
The STAs pad their frames, so that they end at the same time.
To acknowledge the STA transmissions, the AP can either send multiple BlockAcks in each RU to the respective STAs, or send a single Multi-STA BlockAck which acknowledges the frames from all STAs.
In any case, the inter-frame space used is $SIFS$

\subsection{Random Access with Wi-Fi OFDMA}
The AP includes in beacons an OFDMA-based Random Access Parameter Set element, which contains the OFDMA contention window ($OCW$) parameters, specifically, its minimal ($OCWmin$) and maximal ($OCWmax$) values.

To transmit a frame in random access, a STA maintains an OFDMA backoff (OBO) counter and an OFDMA contention window, initially equal to $OCWmin$.
For a frame transmission, the STA draws its OBO counter equiprobably in the range from $0$ to $OCW$.
Every time a STA receives a Trigger Frame, it decrements the OBO counter by the number of RUs assigned for random access.
If the OBO counter becomes less then or equal to zero, the STA randomly selects one of the RUs assigned for random access and transmits its frame in this RU.
If the frame is successfully transmitted (i.e., the STA has received an acknowledgement for its frame), the STA sets its $OCW$ to $OCWmin$.
Otherwise, the STA updates its $OCW$ to $2 \times OCW + 1$, if the new $OCW$ does not exceed $OCWmax$.

\section{Related Papers}
Reviews: \cite{khorov2015ieee, bellalta2016ieee}.
Performance improvement for random access: \cite{khorov2016several}.
Dense deployment interference improvement: \cite{khorov2016joint}.
Something about OFDMA: \cite{qu2015ofdma}.

\section{Network Scenario and Problem Statement}
We consider a scenario with an AP and a group of STAs connected to it.
From time to time STAs generate data streams that have to be transmitted to the AP.
The data stream length in bytes and the interval between two stream generation times are random and are described by a given distribution.
In the considered scenario devices use only OFDMA for data transmission, i.e., traditional Wi-Fi random access (EDCA) is not used.

When a STA generates a stream, it requests channel resources from the AP.
For this purpose it uses the OFDMA random access to send a buffer status report (BSR) to the AP.
Having received a BSR, the AP learns that it has to allocate an RU for the STA, and also it learns the amount of resources that the STA intends to transmit.

We consider a typical scenario for uplink data transmission in Wi-Fi network, when the STAs send small streams, such as HTML requests or any other data related to Web browsing.
In such scenario, it is critical to minimize the data delivery time for the STAs.
The data delivery time for the STAs depends on two summands: the time spent in random access and the time spent actually transmitting data.
Both of these summands are, in fact, determined by the scheduling algorithm used at the AP.

The IEEE 802.11ax standard does not specify a scheduler.
It does not state the number of RUs that should be allocated for random access, neither does it define an algorithm to select the RU sizes for different STAs.

So we state the following problem in the paper: \emph{to design a scheduler for Wi-Fi OFDMA uplink data transmission that minimizes data delivery time}.

\clearpage

\begin{abstract}
In order to meet the continuously increasing demands for high throughput in wireless networks, IEEE 802 LAN/MAN Standard Committee is developing IEEE 802.11ax: a new amendment for the Wi-Fi standard.
This amendment provides various ways to improve the efficiency of Wi-Fi. The most revolutionary one is OFDMA.
Apart from obvious advantages, such as decreasing overhead for short packet transmission at high rates and improving robustness to frequency selective interference, being used for uplink transmission, OFDMA can increase power spectral density and, consequently, user data rates. However, the gain of OFDMA mainly depends on the resource scheduling between users.
The peculiarities of OFDMA implementation in Wi-Fi completely change properties of classic schedulers used in other OFDMA systems, e.g. LTE. 
In the paper, we consider the usage of OFDMA in Wi-Fi for uplink transmission.
We study peculiarities of OFDMA in Wi-Fi, adapt classic schedulers to Wi-Fi, explaining why they do not perform well.
Finally we develop a novel scheduler, MUTAx, and evaluate its performance with simulation. 
\end{abstract}

\begin{IEEEkeywords}
Wi-Fi, IEEE 802.11ax, High Effiency WLAN, OFDMA, Scheduling
\end{IEEEkeywords}

\section{Introduction}
%According to Cisco report, 50\% of traffic will be transmitted over WLANs in 2021 \cite{ciscoreport}. 
Nowadays, Wi-Fi has become the main technology for wireless local area networks. High number of Wi-Fi devices, as well as the number of deployed networks, leads to huge interference. To improve efficiency of Wi-Fi networks in existing and emerging indoor and outdoor scenarios, Wi-Fi community is currently developing a new standard, namely IEEE 802.11ax. 
In contrast to 11ac, PHY layer data rate of which tenfold excels the one of the preceding technology (namely 11n), the expected quadruple growth of user throughput in 11ax networks will be caused mostly by advanced channel access techniques, rather than by PHY data rates increased by just 37\%.

The main feature of 11ax is Orthogonal Frequency Division Multiple Access (OFDMA), which extends the legacy Wi-Fi Carrier Sense Multiple Access with Collision Avoidance (CSMA/CA) by introducing a possibility to divide channel resources in frequency domain. Since 11a, Wi-Fi has been using Orthogonal Frequency Division Multiplexing (OFDM). However, with OFDM, at any time instant all tones (also referred to as subcarriers) are used to transmit data for one user, while OFDMA allows assigning various tones to different users. The efficiency of OFDMA significantly depends on how the tones are scheduled between users. However the 11ax standard will provide only a flexible framework, without any predefined scheduling algorithms. 

Fortunately, scheduling problem has been carefully investigated in cellular networks, like LTE, where OFDMA has appeared much earlier. So at first sight, it is worth to use one of the existing cellular schedulers and adapt it to Wi-Fi peculiarities. This work itself is not easy, since OFDMA fundamentals in Wi-Fi differ from that in LTE. Moreover, the features of 11ax break assumptions used to derive schedulers for LTE. Thus, nobody can guarantee that being applied to 11ax networks the LTE scheduler remain the best one. 

In this paper, we compare OFDMA schemes in IEEE 802.11ax and LTE, and analyze problems that arise while developing the schedulers for 11ax networks. We also make the first step in this direction and consider a problem of minimizing the average delivery time for uplink transmission. Then we show why well-known schedulers designed for a similar problem are not optimal for 11ax networks and develop a new scheduler that outperforms them. 

The rest of the paper is organized as follows.
Section~\ref{sec:ofdma} briefly describes the main features of OFDMA in 802.11ax, reviews literature and states the problem.
In Section \ref{mutex} we design a brand new scheduler for 11ax networks.
We prove its high efficiency in Section \ref{numerical}.
Section~\ref{conclusion} concludes the paper. 



\section{OFDMA in IEEE 802.11ax Networks}
\subsection{Main Features}
%main peculiarities of OFDMA in Wi-Fi

%How it differs from LTE ones

%Why it can be fruitful

%One of the most loved Wi-Fi features is backward compatibility. Several Wi-Fi generations have passed (IEEE 802.11a/b/g/n/ac), but still different generation Wi-Fi devices are capable to efficiently and fairly share common radio resources.

In contrast to LTE with a rigid traffic-independent time-frequency numerology, in 11ax networks, OFDMA works at the per-frame bases upon native to Wi-Fi Enhanced Distributed Channel Access (EDCA), a sort of decentralized CSMA/CA joint with automatic repeat request. OFDMA frames start with a common preamble, which can be decoded by legacy devices. Having received the preamble, a STA learns the duration of the frame and considers the medium as busy till the end of the frame.
The rest of the frame --- understandable only by 11ax STAs --- can be formed according to OFDMA concept, i.e. various tones of the frame can be assigned to different STAs. 

In 11ax networks, a group of tones assigned to a STA is called Resource Unit (RU).
The IEEE 802.11ax defines RUs that consist of 26, 52, 106, 242, 484, 996 and $2\times996$ OFDM tones.
The set of available RUs depends on the channel width, e.g., in a \SI{40}{\MHz} channel, the STAs can use RUs of up to 484 tones.
A wide RUs can be split into approximately twice narrower RUs \textit{independently from others}. The two exceptions are as follows.
1) A 996-tone RU can be split into two 484-tone RU and one 26-tone RU.
2) A 242-tone RU can be split into two 106-tone RU and one 26 tone RU, see Fig.~\ref{fig:resource_units}.

In LTE networks, a scheduler can allocate an arbitrary subset of downlink (DL) RUs for a user or an arbitrary \emph{interval} of UL RUs for a user.
11ax imposes much stricter constrains on RU selection, since both in DL and UL, a STA cannot be assigned to more than one RU.

Another set of constraints limits the maximal MCS that can be used in narrow RUs and the usage of MU MIMO.
Specifically, MU MIMO is only available in 106-tone and greater RUs, while the novel 1024QAM can be used only in 242-tone and greater RUs.
Such constraints complicate scheduling problem in 11ax networks.

An OFDMA frame may contain RUs with different number of tones, however all RUs inside the frame must have the same duration.
For that, the STAs may use novel flexible fragmentation or padding. 

All transmissions inside one OFDMA frame must be synchronized, i.e. start and finish at the same time instants.
This can be easily done in DL, where an OFDMA frame is generated by the Access Point (AP).
However, to provide synchronization for uplink, the AP can use novel Trigger Frame (TF).
SIFS after TF reception, the STAs transmit their parts of UL OFDMA frame.
If needed, the AP acknowledges reception of each part by sending a set of ACKs inside an OFDMA frame or by sending Multi-STA Block Acknowledgment (MSBA).

It is the AP which, for both DL and UL transmissions, determines modulation and coding scheme (MCS), duration, RU assignment and other OFDMA parameters. Such information can be transmitted in frame headers (for DL) and in the Trigger frame (for UL). An example of UL OFDMA transmission is shown in Fig.~\ref{fig:transmission}. 

As mentioned above, 11ax moves decision making logic from the STAs to the AP that determines which STA transmits, when, in which RU, how much data it transmits, etc.
To make a correct decision, the AP needs to be aware of STAs' buffered traffic and channel conditions.
This information can be periodically requested by the AP.
Moreover, to notify the AP about arrived packets, a STA can proactively send so-called Buffer Status Report (BSR).
For that, it can aggregate BSR with a data frame sent in the dedicated RU.
Another option is legacy EDCA.
Thanks to the recent change in the 11ax draft standard, the AP can separately tune EDCA parameters of scheduled STAs in such a way, that they do not contend for the channel with unscheduled STAs.
It means that if a STA does not obtain UL RUs, it likely delivers a BSR at the first transmission attempt because of the extremely low contention.
The third approach to send a BSR is using OFDMA Random Access.
For that, the AP can allocate one or several RUs for random access and the contending STAs will randomly choose one of such RUs. 
Anyway, thanks to these methods, the AP can quickly obtain information about new frames buffered  at the associated STAs and waiting for UL RUs.

OFDMA brings many benefits to 11ax networks.
First it makes transmission more reliable to frequency selective interference and fading.
This is especially important for wide \SI{160}{MHz} channels introduced in 11ac.
Second, with OFDMA we can glue short packets destined for or originated from various STAs, which significantly reduces overhead caused by PHY headers and channel access time and interframe spaces.
Third, for UL transmissions by edge STAs it makes sense to use narrow channels instead of wide ones.
Indeed, since the STAs are spatially separated they can simultaneously transmit at the maximal allowed power without breaking legal limitations on the emitted energy.
Thus, by reducing RU width, we increase power spectral density received from the STAs and can use higher MCS.
In other words, by allowing numerous spatially separated STAs to transmit in parallel, we increase the cumulative received power in comparison to the case when only one STA transmits.
For edge STAs, increasing power spectral density leads to a higher MCS, so  the average amount of data received from an OFDMA frame is higher than that from a legacy.
Thus in contrast to LTE, in 802.11ax networks the rates in UL RUs are non-additive, i.e. if a STA transmits in twice wider RU, it is not guaranteed that it transmits twice more data.
This effect will be carefully investigated in the paper.

While in DL OFDMA just allows AP to transmit data to multiple users simultaneously, OFDMA in the uplink provides more benefits. In particular, independently on the size of RU in which STA is transmitting, STA spends the same amount of power $P_0$. Because of that, with OFDMA the signal power density is increased, so MCS with higher data rate can be used for transmission in narrower RU. As a result, in contrast to LTE, in 802.11ax uplink transmission data rate in different RUs is non-additive, i.e. if a STA transmits in twice wider RU, it is not guaranteed that it achieves twice higher data rate. Moreover, in some cases the achieved data rate can be even smaller.

\subsection{Data Transmission Sequence}
To organize data transmission process with OFDMA, the AP transmits Trigger Frames, in which it includes the scheduling information (see Fig. \ref{fig:transmission}).
Specifically, for each allocated RU it adds a User Info element that indicates the RU, the MCS that should be used in that RU and the AID of the designated STA.
If the AID is $0$, then the RU is allocated for random access, which can be used by STAs to request channel resources from the AP.

Having received a Trigger Frame, STAs transmit their data frames in designated RUs or in RUs allocated for random access.
The inter-frame space between the STAs' frames and the Trigger Frame is $SIFS$.
The STAs pad their frames, so that they end at the same time.
To acknowledge the STA transmissions, the AP can either send multiple BlockAcks in each RU to the respective STAs, or send a single Multi-STA BlockAck which acknowledges the frames from all STAs.
In any case, the inter-frame space used is $SIFS$




\subsection{Random Access with Wi-Fi OFDMA}
The AP includes in beacons an OFDMA-based Random Access Parameter Set element, which contains the OFDMA contention window ($OCW$) parameters, specifically, its minimal ($OCWmin$) and maximal ($OCWmax$) values.

To transmit a frame in random access, a STA maintains an OFDMA backoff (OBO) counter and an OFDMA contention window, initially equal to $OCWmin$.
For a frame transmission, the STA draws its OBO counter equiprobably in the range from $0$ to $OCW$.
Every time a STA receives a Trigger Frame, it decrements the OBO counter by the number of RUs assigned for random access.
If the OBO counter becomes less then or equal to zero, the STA randomly selects one of the RUs assigned for random access and transmits its frame in this RU.
If the frame is successfully transmitted (i.e., the STA has received an acknowledgement for its frame), the STA sets its $OCW$ to $OCWmin$.
Otherwise, the STA updates its $OCW$ to $2 \times OCW + 1$, if the new $OCW$ does not exceed $OCWmax$.


\subsection{Related Works}

In \cite{khorov2016several}, authors study the performance of the network consisting of the traditional legacy stations and stations which can work with 11ax features.
Authors propose an approach for optimal channel access parameter values selection, which guarantees fairness between legacy and 802.11ax and significantly increases the number of the OFDMA transmissions for 802.11ax STAs.
However, the model developed in \cite{khorov2016several} allows only estimating the number of the OFDMA transmissions in the network, but not the achievable data rate. 

Many studies on 802.11ax performance were presented at the meetings of the 802.11ax Task Group (TGax), e.g. \cite{ofdma-par1, ofdma-par2}.
However, although many network topologies have been already studied, the only considered scheduler in TGax has been the random scheduler with a static RU configuration.

The problem of scheduling in 11ax uplink has been considered in \cite{karaca2016resource}, which focuses on selection of the RU duration.
The authors initially assume that the AP does not know the amount of data the STAs have and thus does not know the correct duration of RUs that should be allocated.
They propose a scheme that can be used by the AP to obtain this information and derive the best way to select the duration of STAs' transmission in terms of throughput and energy consumption.
However, they do not consider any specific way to divide the channel into RUs and to assign the RUs to the STAs.
Neither do they consider random access and the possibility of STAs to deliver RSRs by aggregating them to the transmitted data.

%Dense deployment interference improvement: \cite{khorov2016joint}.

Random access for UL OFDMA in 802.11ax has been studied in \cite{lanante2017performance}.
The authors consider a scenario, when STAs transmit saturated data flows and use only random access for transmission.
They describe a mathematical model of transmission with OFDMA random access and use it for analysis and optimization of the network performance in terms of throughput and percentage of successful RUs.
The methodology introduced in the paper might be used to tune the random access for OFDMA UL, however, usage of deterministic access is more feasible in terms of channel efficiency for the studied scenario.

The problem of resource allocation in cellular networks is widely studied in literature.
In many papers, it is formulated as the following optimization problem.
Consider a network with a base station (BS) and $N$ associated users.
Each time unit, the BS runs scheduler which allocates $M$ RUs to some STAs in order to maximize some network-wide utility function.
The most widely used utility functions and corresponding schedulers are listed below. 

To maximize cumulative throughput $S = \sum\limits_{i=1}^N S_i(t)$ at time instant $t$, the BS uses the Max Rate (MR) scheduler, which considers RUs one by one and assigns each RU to a user with the highest nominal data rate $r_{i}^{j}$ in this RU.
However, as shown in many papers (e.g. \cite{capozzi2013downlink}), under high load the MR scheduler blocks users with low instant rates.

To avoid this problem, the Proportional Fair (PF) scheduler has been proposed.
It maximizes $\sum_{i=1}^{N} \log{S_i(t)}$.
For that, RU $j$ shall be allocated to user $\hat{i}_{PF}= \arg \max_i \frac{r_i^{(j)}(t)}{S_{i}(t-1)}.$
Authors of~\cite{kwan2009proportional} show that in long term the PF scheduler gives the same amount of channel time for all users, therefore resulting in fair resource allocation.

Both MR and PF have been designed for saturated (infinite) flows.
From the practical point of view, it is worth to consider unsaturated scenario with finite flows of given length.
Such flows can represent HTTP requests or files transmitted in a wireless network.
For such traffic, it is worth to consider upload time which affects user perceived quality of experience (QoE).
If the channel properties do not change with time, the rate in different RUs is the same and additive, the Shortest Remaining Time First (SRTF) scheduler is proven to provide minimal average upload time.
Simplistically, SRTF allocates all RUs to a user for which $\frac{D_i(t)}{r_i}$ is the minimal one, where $D_i(t)$ is the remaining amount of data of user $i$ and $r_i$ is its rate in the whole channel.
As explained in Section \ref{mainfeatures}, the assumptions made to derive such a scheduler are not met for UL OFDMA transmission in 11ax networks, which brings us to the following problem statement.


\section{Design of the Scheduler}
In this section, we design a novel scheduler called MUTAX, Minimizing Upload Time in 11AX networks. While deriving formulae we neglect the effects related to packetization (including aggregation and fragmentation) overhead. Apart from that, for shortness we consider only $n$ STAs with flows and assume that each STA has only one flow. Both STA and flow are denoted as $i, i=1,...,n$.

Let slot be a time interval between two consequent TFs.
It should be noted that slots may have different duration. The maximal one is related to the standard limit of \SI{5484}{\us} for the physical protocol data unit (PPDU) duration. A slot can be shorter, if at least one STA which transmits in this slot has no more data.

The MUTAX algorithm has two steps. At the first step, we order existing flows and calculate the sum upload time of the flows, as if we used exhaustive service.
At the second stage, we try to improve the sum upload time by serving some flows in parallel.
Let us consider the steps in detail.

At the first step, we serve each flows exhaustively.
Except for waiting, the time needed to upload flow $i$ equals $t_i = \frac{D_i}{r_{i}}$. %, where $r_{i}$ is the rate of STA $n$ transmitting in the whole frequency channel.
The first STA finishes delivering its flow by time $t_1$.
The second STA starts right after the first one and delivers its flow by time $t_2 + t_1$, etc.
As the result, the total upload time for existing flows is
\[ T_{step1} = \sum_{i = 1}^{n} \left(n - i\right) t_i. \]
Obviously, to minimize the sum upload time we have to sort the STAs in the ascending order by $t_i$.

At the second step, we divide the channel into several RUs.   
Let $m$ be the number of RUs and $j, 1\le j \le m$ be the index of RU in the considered RU configuration.  
$x_i^j$ is an indicator which equals $1$ if STA $i$ is assigned to RU $j$, and $0$, otherwise.
For shortness, $X$ is the two dimensional matrix of $\left\{x_i^j\right\}$ representing RU assignment to the STAs. 

With defined notation, the total upload time $T\left(X\right) $ of existing flows differs from $T_{step1}$ in the following way. First, the upload time of each of $n$ flows increases by  the current slot duration $\tau$. Second, if $x_i^j=1$, the remaining amount of data of flow $i$ decreases by the amount of data the STA transmits in RU $j$ of the current slot: $\Delta D_i^j = \min\left\{D_i, \tau \times r_{i}^{j}\right\}$. Thus  
\[ T\left(X\right) = n \tau + \sum_{i = 1}^{n} \left(n - i\right) \frac{D_i -  \sum_{k = 1}^{m} x_i^j \Delta D_i^j}{r_{i}} \]


%Leaving out of consideration $n \tau_t$, we can say that to minimize $T\left(X\right)$ we need to sort STAs in the ascending order by $\frac{D_i -  \sum_{k = 1}^{m} x_i^j \Delta D_i^j}{r_{i}}$.

Since both $\tau$ and  $\Delta D_i^j$ depend on the resource allocation $X$, minimization of $T(X)$ requires exhaustive search by possible ways to allocate the RUs to the STAs, and to simplify the task we propose an heuristic approach based on two assumptions.
Firstly, we neglect the change of $n \tau_t$ for different allocations, as a slot cannot be too long due to standard limitations.
Secondly, we sort the STAs in the ascending order by $t_n$ only once, before considering different ways to assign RUs to the STAs.
Under these assumptions, to minimize  $T(X)$, we have to maximize the following expression $\sum_{k = 1}^{m} \sum_{i = 1}^{n } \left(n - i\right) \frac{x_i^j \Delta D_i^j}{r_{i}}$.

Let us denote $\lambda_i^j = \left(n - i\right) \frac{x_i^j \Delta D_i^j}{r_{i}}$ and define the following optimization problem:
\begin{align*}
	\max \sum_{i} \sum_{j} x_i^j \lambda_i^j \\
	\text{subject to} \sum_{i} x_i^j \leq 1,\ \  \forall j \\
	\sum_{j} x_i^j \leq 1, \ \ \forall i \\
	\sum_{i} \sum_{j} x_i^j \leq m
\end{align*}
This problem\footnote{If we define $\lambda_i^j = \frac{r_i^j}{S_i}$, where $S_i$ is the amount of data transmitted by STA $i$, we obtain the optimization problem for the adaptation of the PF scheduler to 11ax.} is known as the assignment problem which can be solved in polynomial time using the Kuhn-Munkres algorithm \cite{bourgeois1971extension}.
Its solution is the assignment $\hat X$ that yields minimal $T(X)$.

Note that assignment $\hat X$ is found for a specific configuration of RUs.
To minimize upload time, we consider different ways to split the channel into RUs. For each configuration of RUs we solve the optimization problem and thus find the best assignment of the channel resources.
The examination of RU configuration can be hastened by excluding configurations that are obviously worse than the known alternatives, e.g., if we have two STAs and a \SI{20}{\MHz} channel, we do consider configuration with one $106$-tone RU, one 52-tone RU and three 26-tone RUs, but exclude configuration with one $106$-tone RU and five $26$-tone RUs.

\section{Numerical  Results}
%\subsection{Channel Model}
To evaluate the developed scheduler, we use  the well-known NS-3 simulator~\cite{ns-3}.
We have implemented the MUTAX scheduler, as well as 11ax adaptations of PF, MR and SRTF.
Since the performance of PF significantly depends on how the channel is divided into RUs, we find the best RU configuration with exhaustive search.

We run simulation in a scenario described in Section \ref{problem}.
The network operates in a 40 MHz channel at 5 GHz.
The flow sizes are drawn from truncated lognormal distribution with minimal, average and maximal values of 1 KB, 500 KB, and 5 MB, respectively. When a flow is delivered, the next flow is generated after a random delay drawn from truncated exponential distribution with minimal, average and maximal values of \SI{0.1}{\s}, \SI{0.3}{\s} and \SI{0.6}{\s}, respectively.
%\ref{ implement it  apply the 802.11ax path-loss model for the residential scenario \cite{presentation_scenarios}:
%\begin{align*}
%PL(d) &= 40.05 + 20 log_{10}(\frac{f_c}{2.4}) + 20 log_{10}(min(d, 5)) + \\
%&+ \mathbb{I}(d > 5) 35 log_{10}(\frac{d}{5}),
%\end{align*}
%where $PL$ is the path-loss in dB, $f_c$ is the central frequency in GHz, $d$ is the distance between the devices and $\mathbb{I}{x}$ equals $1$ if $x$ is true and $0$ otherwise.
%The AP receives the signal from the STAs with power $P(d)$ calculated as
%\[P(d) = P_0 + 10 log_{10}(\frac{F}{F_{max}}) - PL(d),\]
%where $P_0$ is the STA's transmission power, $d$ is the distance between the STA and the AP, $F$ is the number of tones in the RU, and $F_{max}$ is the maximal number of tones in a RU in the considered channel.

%Here the second summand expresses the fact that STAs use the same transmission power to transmit in RUs regardless of their width, and the resulting $SNR$ is higher for narrow RUs.

%\subsection{Scheduler Performance}
%Besides the developed scheduler introduces in the paper, which we denote as MUTAX (Minimization of Upload Time in 802.11AX), we consider also classical schedulers, such as Max Rate (MR), Shortest Remaining Time First (SRTF) and Proportional Fair (PF).
%MR allocates the whole channel to the STA which has the greatest transmission rate.
%SRTF allocates the whole channel to the STA which has the lowest remaining time $t_i$.
%PF allocates RUs to the STAs in a way which maximizes $\sum_{c}{n} x_n^c \frac{r_n^c}{Q_n}$, where $Q_n$ is the amount of data transmitted by the STA $n$.
%As one can see, PF perfornance also depends on the way the channel is divided into RUs, so we find the best RU configuration with exhaustive search.

In first set of experiments, the STAs are located uniformly within a small circle of radius $R = \SI{5}{\m}$ around the AP.
In such a case, the channel quality is so high that the STAs use the maximal MCS to transmit in RUs of any width, except for 26-, 52- and 106-tone RUs, for which the usage of two highest MCSs is prohibited. Obviously, in this case OFDMA cannot bring any profit against SRTF, as the division of the channel without changing the MCS cannot increase the data rate, provided that the MCS can cope with the noise.
This result is supported by simulation, see Fig \ref{fig:10-e}, which shows that if the channel for all STAs is perfect, MUTAX yields the same upload time, as SRTF, and they both outperform the PF and MR schedulers by up to 30\%. 
As we consider traffic model of a closed loop system, along with the reduction of upload time MUTAX provides the increase of goodput compared to the other schedulers.

\begin{figure*}[tb]
	\centering
	\includegraphics[width = 0.32\linewidth]{5-d.pdf}
	\includegraphics[width = 0.32\linewidth]{5-e.pdf}
	\includegraphics[width = 0.32\linewidth]{5-t.pdf}
	\caption{\label{fig:10-e}  Upload time, busy channel time ratio and goodput vs the number of STAs in the small circle.}
\end{figure*}

\begin{figure*}[bt]
	\centering
	\includegraphics[width = 0.32\linewidth]{20-d.pdf}
	\includegraphics[width = 0.32\linewidth]{20-e.pdf}
	\includegraphics[width = 0.32\linewidth]{20-t.pdf}
	\caption{\label{fig:25-e} Upload time, busy channel time ratio and goodput vs the number of STAs in the large circle.}
\end{figure*}

The second set of experiments corresponds to the case when STAs are located in a larger circle of radius $R = \SI{20}{\m}$.
Such conditions provide variety of MCSs among STAs and among RU widths, so it becomes feasible to split the channel between different users.
According to simulation results, see Fig. \ref{fig:25-e}, in this case designed to minimize upload time the classic SRTF work much worse than even 11ax adaptation of PF. At the same time, MUTAX shows 20\% lower upload time than PF. The results show that in this case the schedulers based on the exhaustive service (MR and SRTF) are  much less efficient than channel-splitting schedulers (MUTAX and PF) and the gap between them increases with the number of client STAs. %Note that MR and SRTF have a bit higher channel busy ratio than PF under higher load, since PF more intensively uses OFDMA and has lower overhead induces by headers and channel access.   
In a large circle scenario the gain in goodput of MUTAX against SRTF and MR is almost 100\%.


\section{Conclusion}
In the paper, we have studied scheduling problem in IEEE 802.11ax networks, the standard of which is currently under development.
We show that because of 11ax OFDMA peculiarities the existing schedulers cannot be directly applied to the new technology.
Specifically, in the paper we have considered the problem of uplink scheduling which aims to minimize average upload time in a scenario with high number of active users.
We showed that depending on the scenario sometimes it is worth to use classic SRTF scheduler, while in other cases the channel should be split between several STAs in order to minimize upload time.
We develop a novel scheduler, called MUTAX, which adaptively chooses the best strategy and significantly outperforms existing popular solutions.

\bibliographystyle{IEEEtran}
\bibliography{biblio} 
\fi
\end{document}
