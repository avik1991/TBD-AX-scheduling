\include{include/header}
%\include{include/macros}

\begin{document}
\IEEEoverridecommandlockouts

\title{%Delay-Minimizing Scheduling for OFDMA Uplink in IEEE 802.11ax Networks
IEEE~802.11ax Uplink Scheduler to Minimize Delay: a Classic Problem with New Constraints	
\thanks{The research was supported by the Russian Science Foundation (agreement No 16-19-10687).}}

\author{
\IEEEauthorblockN{Dmitry Bankov, Andre Didenko, Evgeny Khorov, Vyacheslav Loginov, Andrey Lyakhov}
\IEEEauthorblockA{Institute for Information Transmission Problems, Russian Academy of Sciences, Moscow, Russia\\
Email: \{bankov, dida, khorov, loginov, lyakhov\}@iitp.ru}
}

\maketitle

\begin{abstract}
In order to meet the continuously increasing demands for high throughput in wireless networks, IEEE 802 LAN/MAN Standard Committee is developing IEEE 802.11ax: a new amendment for the Wi-Fi standard.
This amendment provides various ways to improve the efficiency of Wi-Fi. The most revolutionary one is OFDMA.
Apart from obvious advantages, such as decreasing overhead for short packet transmission at high rates and improving robustness to frequency selective interference, being used for uplink transmission, OFDMA can increase power spectral density and, consequently, user data rates. However, the gain of OFDMA mainly depends on the resource scheduling between users.
%It allows the Wi-Fi Access Point to service several stations simultaneously, to better cope with fading and, in case of uplink transmission, to improve the spectral power density.
The peculiarities of OFDMA implementation in Wi-Fi completely change properties of classic schedulers used in other OFDMA systems, e.g. LTE. 
In the paper, we consider the usage of OFDMA in Wi-Fi for uplink transmission.
We study peculiarities of OFDMA in Wi-Fi, adapt classic schedulers to Wi-Fi, explaining why they do not perform well.
Finally we develop a novel scheduler, MUTAX, and evaluate its performance with simulation. 
\end{abstract}

\begin{IEEEkeywords}
Wi-Fi, IEEE 802.11ax, High Effiency WLAN, OFDMA, Scheduling
\end{IEEEkeywords}

\section{Introduction}
%According to Cisco report, 50\% of traffic will be transmitted over WLANs in 2021 \cite{ciscoreport}. 
Nowadays, Wi-Fi has become the main technology for wireless local area networks. High number of Wi-Fi devices, as well as the number of deployed networks, leads to huge interference. To improve efficiency of Wi-Fi networks in existing and emerging indoor and outdoor scenarios, Wi-Fi community is currently developing a new standard, namely IEEE 802.11ax. 
In contrast to 11ac, PHY layer data rate of which tenfold excels the one of the preceding technology (namely 11n), the expected quadruple growth of user throughput in 11ax networks will be caused mostly by advanced channel access techniques, rather than by PHY data rates increased by just 37\%.

The main feature of 11ax is Orthogonal Frequency Division Multiple Access (OFDMA), which extends the legacy Wi-Fi Carrier Sense Multiple Access with Collision Avoidance (CSMA/CA) by introducing a possibility to divide channel resources in frequency domain. Since 11a, Wi-Fi has been using Orthogonal Frequency Division Multiplexing (OFDM). However, with OFDM, at any time instant all tones (also referred to as subcarriers) are used to transmit data for one user, while OFDMA allows assigning various tones to different users. The efficiency of OFDMA significantly depends on how the tones are scheduled between users. However the 11ax standard will provide only a flexible framework, without any predefined scheduling algorithms. 

Fortunately, scheduling problem has been carefully investigated in cellular networks, like LTE, where OFDMA has appeared much earlier. So at first sight, it is worth to use one of the existing cellular schedulers and adapt it to Wi-Fi peculiarities. This work itself is not easy, since OFDMA fundamentals in Wi-Fi differ from that in LTE. Moreover, the features of 11ax break assumptions used to derive schedulers for LTE. Thus, nobody can guarantee that being applied to 11ax networks the LTE scheduler remain the best one. 

In this paper, we compare OFDMA schemes in IEEE 802.11ax and LTE, and analyze problems that arise while developing the schedulers for 11ax networks. We also make the first step in this direction and consider a problem of minimizing the average delivery time for uplink transmission. Then we show why well-known schedulers designed for a similar problem are not optimal for 11ax networks and develop a new scheduler that outperforms them. 

The rest of the paper is organized as follows.
Section~\ref{sec:ofdma} briefly describes the main features of OFDMA in 802.11ax, reviews literature and states the problem.
In Section \ref{mutex} we design a brand new scheduler for 11ax networks.
We prove its high efficiency in Section \ref{numerical}.
Section~\ref{conclusion} concludes the paper. 

     

\section{OFDMA in IEEE 802.11ax Networks}
\label{sec:ofdma}
\subsection{Main Features}
\label{mainfeatures}
%main peculiarities of OFDMA in Wi-Fi

%How it differs from LTE ones

%Why it can be fruitful

%One of the most loved Wi-Fi features is backward compatibility. Several Wi-Fi generations have passed (IEEE 802.11a/b/g/n/ac), but still different generation Wi-Fi devices are capable to efficiently and fairly share common radio resources.

In contrast to LTE with a rigid traffic-independent time-frequency numerology, in 11ax networks, OFDMA works at the per-frame basis upon native to Wi-Fi Enhanced Distributed Channel Access (EDCA), a sort of decentralized CSMA/CA joint with automatic repeat request.
OFDMA frames start with a common preamble, which can be decoded by legacy devices.
Having received the preamble, a station (STA) learns the duration of the frame and considers the medium as busy till the end of the frame.
The rest of the frame is understandable only by 11ax STAs and can be formed according to OFDMA concept, i.e. various tones of the frame can be assigned to different STAs. 

In 11ax networks, a group of tones assigned to a STA is called Resource Unit (RU).
The IEEE 802.11ax defines RUs that consist of 26, 52, 106, 242, 484, 996 and $2\times996$ OFDM tones.
The set of available RUs depends on the channel width, e.g., in a \SI{40}{\MHz} channel, the STAs can use RUs of up to 484 tones.
A wide RU can be split into approximately twice narrower RUs \textit{independently from others}. The two exceptions are as follows.
1) A 996-tone RU can be split into two 484-tone RU and one 26-tone RU.
2) A 242-tone RU can be split into two 106-tone RU and one 26 tone RU, see Fig.~\ref{fig:resource_units}.

\begin{figure}[tb]
	\centering
	\input{channelization}
	\caption{\label{fig:resource_units} RU locations in \SI{40}{\MHz} channel}
\vspace{-0.5em}
\end{figure}

In LTE networks, a scheduler can allocate an arbitrary subset of downlink (DL) RUs for a user or an arbitrary \emph{interval} of UL RUs for a user.
11ax imposes much stricter constrains on RU selection, since both in DL and UL, a STA cannot be assigned to more than one RU.

Another set of constraints limits the maximal MCS that can be used in narrow RUs and the usage of MU MIMO.
Specifically, MU MIMO is only available in 106-tone and greater RUs, while the novel 1024QAM can be used only in 242-tone and greater RUs.
Such constraints complicate scheduling problem in 11ax networks.

An OFDMA frame may contain RUs with different number of tones, however all RUs inside the frame must have the same duration.
For that, the STAs may use novel flexible fragmentation or padding. 

All transmissions inside one OFDMA frame must be synchronized, i.e. start and finish at the same time instants.
This can be easily done in DL, where an OFDMA frame is generated by the Access Point (AP).
However, to provide synchronization for uplink, the AP can use novel Trigger Frame (TF).
SIFS after TF reception, the STAs transmit their parts of UL OFDMA frame.
If needed, the AP acknowledges reception of each part by sending a set of ACKs inside an OFDMA frame or by sending Multi-STA Block Acknowledgment (MSBA).

It is the AP which, for both DL and UL transmissions, determines modulation and coding scheme (MCS), duration, RU assignment and other OFDMA parameters. Such information can be transmitted in frame headers (for DL) and in the Trigger frame (for UL). An example of UL OFDMA transmission is shown in Fig.~\ref{fig:transmission}. 

\begin{figure}[tb]
	\centering{
		\input{transmission}}
	\caption{\label{fig:transmission} Frame handshake for UL OFDMA transmission.}
\vspace{-0.5em}
\end{figure}

As mentioned above, 11ax moves decision making logic from the STAs to the AP that determines which STA transmits, when, in which RU, how much data it transmits, etc.
To make a correct decision, the AP needs to be aware of STAs' buffered traffic and channel conditions.
This information can be periodically requested by the AP.
Moreover, to notify the AP about arrived packets, a STA can proactively send so-called Buffer Status Report (BSR).
For that, it can aggregate BSR with a data frame sent in the dedicated RU.
Another option is legacy EDCA.
Thanks to the recent change in the 11ax draft standard, the AP can separately tune EDCA parameters of scheduled STAs in such a way, that they do not contend for the channel with unscheduled STAs.
It means that if a STA does not obtain UL RUs, it likely delivers a BSR at the first transmission attempt because of the extremely low contention.
The third approach to send a BSR is using OFDMA Random Access.
For that, the AP can allocate one or several RUs for random access and the contending STAs will randomly choose one of such RUs. 
Anyway, thanks to these methods, the AP can quickly obtain information about new frames buffered  at the associated STAs and waiting for UL RUs.

OFDMA brings many benefits to 11ax networks.
First it makes transmission more reliable to frequency selective interference and fading.
This is especially important for wide \SI{160}{MHz} channels introduced in 11ac.
Second, with OFDMA we can glue short packets destined for or originated from various STAs, which significantly reduces overhead caused by PHY headers and channel access time and interframe spaces.
Third, for UL transmissions by edge STAs it makes sense to use narrow channels instead of wide ones.
Indeed, since the STAs are spatially separated they can simultaneously transmit at the maximal allowed power without breaking legal limitations on the emitted energy.
Thus, by reducing RU width, we increase power spectral density received from the STAs and can use higher MCS.
In other words, by allowing numerous spatially separated STAs to transmit in parallel, we increase the cumulative received power in comparison to the case when only one STA transmits.
For edge STAs, increasing power spectral density leads to a higher MCS, so  the average amount of data received from an OFDMA frame is higher than that from a legacy.
Thus in contrast to LTE, in 802.11ax networks the rates in UL RUs are non-additive, i.e. if a STA transmits in twice wider RU, it is not guaranteed that it transmits twice more data.
This effect will be carefully investigated in the paper.
%
%
%====
%
%For example, the standard prohibits the usage of high-speed MCSs in small RUs.
%At the same time, for each RU width, the standard defines the minimal receiver sensitivity to signal transmitted with a specific MCS, and the faster the MCS, the higher is the sensitivity threshold.
%As the result, a STA cannot use high-speed MCSs if it has poor channel conditions.
%
%A wider RU does not necessarily mean that the STA transmits at greater speed.
%A STA uses the same transmission power both for wide and narrow RUs, which results in greater signal-to-noise ratio ($SNR$) values for narrow RUs.
%As the result, in a narrow RU it can use higher MCSs which can yield greater transmission rate.
%
%
%
%
%
%While in DL OFDMA just allows AP to transmit data to multiple users simultaneously, OFDMA in the uplink provides more benefits. In particular, independently on the size of RU in which STA is transmitting, STA spends the same amount of power $P_0$. Because of that, with OFDMA the signal power density is increased, so MCS with higher data rate can be used for transmission in narrower RU. As a result, in contrast to LTE, in 802.11ax uplink transmission data rate in different RUs is non-additive, i.e. if a STA transmits in twice wider RU, it is not guaranteed that it achieves twice higher data rate. Moreover, in some cases the achieved data rate can be even smaller.



%Data rates of MCSs used in the 802.11ax are indicated in Table~\ref{table:RUdatarate}.
%
%\begin{table}[t]
%	{\centering
%		\caption{\label{table:RUdatarate} Data rate of different RU types at each MCS in Mbps}
%		\begin{tabular}{|c|c|c|c|c|c|c|}
%			\hline
%			\textbf{MCS}	& 26-tone  & 52-tone  & 106-tone  & 242-tone  & 484-tone  & 996-tone  \\
%			\hline
%			0	&0.8	&1.7	&3.5	&8.1 & 16.3 &34		\\
%			1	&1.7	&3.3	&7.1	&16.3 & 32.5 &68.1		\\
%			2	&2.5	&5	&10.6	&24.4 & 48.8 &102.1		\\
%			3	&3.3	&6.7	&14.2	&32.5 & 65 &136.1		\\
%			4	&5	&10	&21.3	&48.8 & 97.5 &204.2		\\
%			5	&6.7	&13.3	&28.3	&65 & 130 &272.2		\\
%			6	&7.5	&15	&31.9	&73.1 & 146.3 &306.3		\\
%			7	&8.3	&16.7	&35.4	&81.3 & 162.5 &340.3		\\
%			8	&10	&20	&42.5	&97.5 & 195 &408.3		\\
%			9	&11.1	&22.2	&47.2	&108.3 & 216.7 &453.7		\\
%			10	& --	&--	&--	&121.9 & 243.8 &510.4		\\
%			11	& --	&--	&--	&135.4 & 270.8 &576.1		\\
%			\hline
%		\end{tabular}
%	}
%\end{table}

%\subsection{Data Transmission Sequence}
%To organize data transmission process with OFDMA, the AP transmits Trigger Frames, in which it includes the scheduling information (see Fig. \ref{fig:transmission}).
%Specifically, for each allocated RU it adds a User Info element that indicates the RU, the MCS that should be used in that RU and the AID of the designated STA.
%If the AID is $0$, then the RU is allocated for random access, which can be used by STAs to request channel resources from the AP.
%
%Having received a Trigger Frame, STAs transmit their data frames in designated RUs or in RUs allocated for random access.
%The inter-frame space between the STAs' frames and the Trigger Frame is $SIFS$.
%The STAs pad their frames, so that they end at the same time.
%To acknowledge the STA transmissions, the AP can either send multiple BlockAcks in each RU to the respective STAs, or send a single Multi-STA BlockAck which acknowledges the frames from all STAs.
%In any case, the inter-frame space used is $SIFS$




%\subsection{Random Access with Wi-Fi OFDMA}
%The AP includes in beacons an OFDMA-based Random Access Parameter Set element, which contains the OFDMA contention window ($OCW$) parameters, specifically, its minimal ($OCWmin$) and maximal ($OCWmax$) values.
%
%To transmit a frame in random access, a STA maintains an OFDMA backoff (OBO) counter and an OFDMA contention window, initially equal to $OCWmin$.
%For a frame transmission, the STA draws its OBO counter equiprobably in the range from $0$ to $OCW$.
%Every time a STA receives a Trigger Frame, it decrements the OBO counter by the number of RUs assigned for random access.
%If the OBO counter becomes less then or equal to zero, the STA randomly selects one of the RUs assigned for random access and transmits its frame in this RU.
%If the frame is successfully transmitted (i.e., the STA has received an acknowledgement for its frame), the STA sets its $OCW$ to $OCWmin$.
%Otherwise, the STA updates its $OCW$ to $2 \times OCW + 1$, if the new $OCW$ does not exceed $OCWmax$.


\subsection{Related Works}

Despite the fact that 802.11ax amendment is expected to be finished by 2019, it has been already studied in the literature\cite{ bellalta2016ieee, khorov2016several, karaca2016resource, ofdma-par1, ofdma-par2}.

In \cite{khorov2016several}, authors study the performance of the network consisting of the legacy and 802.11ax STAs.
Authors propose an approach for optimal channel access parameter values selection, which guarantees fairness between legacy and 802.11ax and significantly increases the number of the OFDMA transmissions for 802.11ax STAs.
However, the model developed in \cite{khorov2016several} allows only estimating the number of the OFDMA transmissions in the network, but not the achievable data rate.

Many studies on 802.11ax performance were presented at the meetings of the 802.11ax Task Group (TGax), e.g. \cite{ofdma-par1, ofdma-par2}.
However, although many network topologies have been already studied, the only considered scheduler in TGax has been the random scheduler with a static RU configuration.

The problem of scheduling in 11ax uplink has been considered in \cite{karaca2016resource}, which focuses on selection of the RU duration.
The authors initially assume that the AP does not know the amount of data the STAs have and thus does not know the correct duration of RUs that should be allocated.
They propose a scheme that can be used by the AP to obtain this information and derive the best way to select the duration of STAs' transmission in terms of throughput and energy consumption.
However, they do not consider any specific way to divide the channel into RUs and to assign the RUs to the STAs.
Neither do they consider random access and the possibility of STAs to deliver BSRs by aggregating them to the transmitted data.

%Dense deployment interference improvement: \cite{khorov2016joint}.

Random access for UL OFDMA in 802.11ax has been studied in \cite{lanante2017performance}.
The authors consider a scenario, when STAs transmit saturated data flows and use only random access for transmission.
They describe a mathematical model of transmission with OFDMA random access and use it for analysis and optimization of the network performance in terms of throughput and percentage of successful RUs.
The methodology introduced in the paper might be used to tune the random access for OFDMA UL, however, usage of deterministic access is more feasible in terms of channel efficiency for the studied scenario.

The problem of resource allocation in cellular networks is widely studied in literature.
In many papers, it is formulated as the following optimization problem.
Consider a network with a base station (BS) and $N$ associated users.
Each time unit, the BS runs scheduler which allocates $M$ RUs to some STAs in order to maximize some network-wide utility function.
The most widely used utility functions and corresponding schedulers are listed below. 

To maximize cumulative throughput $S = \sum_{i=1}^N S_i(t)$ at time instant $t$, the BS uses the Max Rate (MR) scheduler, which considers RUs one by one and assigns each RU to a user with the highest nominal data rate in this RU (data rate of user $i$ in RU $j$ is hereinafter denoted as $r_{i}^{j}$).
However, as shown in many papers (e.g. \cite{capozzi2013downlink}), under high load the MR scheduler blocks users with low instant rates.

To avoid this problem, the Proportional Fair (PF) scheduler has been proposed.
It maximizes $\sum_{i=1}^{N} \log{S_i(t)}$.
For that, RU $j$ shall be allocated to user $\hat{i}_{PF}= \arg \max_i \frac{r_i^{j}(t)}{S_{i}(t-1)}.$
Authors of~\cite{kwan2009proportional} show that in long term the PF scheduler gives the same amount of channel time for all users, therefore resulting in fair resource allocation.

Both MR and PF have been designed for saturated (infinite) flows.
From the practical point of view, it is worth to consider unsaturated scenario with finite flows of given length.
Such flows can represent HTTP requests or files transmitted in a wireless network.
For such traffic, it is worth to consider upload time which affects user perceived quality of experience (QoE).
If the channel properties do not change with time, the rate in different RUs is the same and additive, the Shortest Remaining Time First (SRTF) scheduler is proven to provide minimal average upload time.
Simplistically, SRTF allocates all RUs to a user for which $\frac{D_i(t)}{r_i}$ is the minimal one, where $D_i(t)$ is the remaining amount of data of user $i$ and $r_i$ is its rate in the whole channel.
As explained in Section \ref{mainfeatures}, the assumptions made to derive such a scheduler are not met for UL OFDMA transmission in 11ax networks, which brings us to the following problem statement.

\subsection{Problem Statement}
\label{problem}
Consider a scenario with an AP and a group of STAs associated to it.
From time to time, STAs generate finite data flows to be delivered to the AP. To notify the AP about new flow, the STAs use EDCA to transmit BSR. Thus the whole channel can be allocated to those STAs, which are known by the AP as having traffic. 

In the paper, we consider the following problem: \emph{to design a scheduler for UL OFDMA data transmission in 11ax networks that minimizes the average upload time}.

%\section{Preliminary analysis}
%Let $N$ be the number of STAs in the network and $N_{DA}$ be the number of STAs that have sent request for channel resource to the AP, hereafter referred to as \emph{DA STAs}.
%The scheduler faces two problems.
%The first one is to determine the number of RUs allocated for random access, to let non-DA STAs send their requests.
%The second one is to allocate the remaining RUs in such a manner that the upload time for DA STAs in minimal.

%\subsection{Optimizing the Random Access}
%Let us, firstly, study the first problem.
%BSRs are short frames, so it is feasible to allocate the smallest (26-tone) RUs for the random access.
%Another point for allocation of 26-tone RUs for the random access is that in such RUs the AP has the greater chance to receive the STA's frame, e.g., when the STA is located far from the AP.
%
%Let $F_{max}$ be the number of 26-tone RUs that can be allocated in the channel, e.g., for \SI{40}{\MHz}-channel it equals 18.
%We consider a scheduler that has a parameter $F$, which is the minimal number of RUs that must be allocated for random access.
%The scheduler can use the remaining channel resources to allocate RUs for the DA STAs.
%Due to the standard limitations on the RU aggregation mentioned in Section \ref{sec:ofdma}, even if every DA STA receives an RU for transmission, there can be a remainder of RUs not allocated for transmission.
%For example, if $F = 4$ and there are 3 DA STAs transmitting in \SI{40}{\MHz}-channel, the AP can allocate a 106-tone RU to each STA, and there will be 6 26-tone RUs remaining.
%The remaining RUs can be used for random access, although their number is greater than $F$.
%
%It is obvious that greater $F$ yields lower time that STAs spend requesting channel resources and vice versa.
%High $F$ value makes STAs count their OBO counters more quickly and also decreases the probability of collision which happens when two STAs randomly select the same RU for transmission.
%At the same time, increasing $F$ we lower the amount of channel resources available for DA STAs.
%As the data delivery time comprises the time STAs spend requesting resources with random access and the time STAs transmit their data, we have to select $F$ in such a way, that minimizes the sum of these times, but not only one summand.
%
%To determine the influence of $F$ on the data delivery time, we model the described scenario in case of STAs randomly scattered around the AP within a circle with radius \SI{30}{\m}.
%We consider typical data streams, which have  TODO distribution.
%TODO: explain why it is feasible to set $F = 0$.


%TODO Input from Slava

\section{Design of the Scheduler}
\label{mutex}
In this section, we design a novel scheduler called MUTAX, Minimizing Upload Time in 11AX networks. While deriving formulae we neglect the effects related to packetization (including aggregation and fragmentation) overhead. Apart from that, for shortness we consider only $n$ STAs with flows and assume that each STA has only one flow. Both STA and flow are denoted as $i, i=1,...,n$.

Let slot be a time interval between two consequent TFs.
It should be noted that slots may have different duration.
The maximal one is related to the standard limit of \SI{5484}{\us} for the physical protocol data unit (PPDU) duration.
A slot can be shorter, if all STAs that transmit in this slot have no more data.

The MUTAX algorithm has two steps. At the first step, we order existing flows and calculate the sum upload time of the flows, as if we used exhaustive service.
At the second stage, we try to improve the sum upload time by serving some flows in parallel.
Let us consider the steps in detail.
  
At the first step, we serve each flow exhaustively.
Except for waiting, the time needed to upload flow $i$ equals $t_i = \frac{D_i}{r_{i}}$. %, where $r_{i}$ is the rate of STA $n$ transmitting in the whole frequency channel.
The first STA finishes delivering its flow by time $t_1$.
The second STA starts right after the first one and delivers its flow by time $t_2 + t_1$, etc.
As the result, the total upload time for existing flows is
\begin{equation}
T_{step1} = \sum_{i = 1}^{n} \left(n - i\right) t_i. 
\end{equation}
Obviously, to minimize the sum upload time we have to sort the STAs in the ascending order by $t_i$.

At the second step, we divide the channel into several RUs.   
Let $m$ be the number of RUs and $j, 1\le j \le m$ be the index of RU in the considered RU configuration.  
$x_i^j$ is an indicator which equals $1$ if STA $i$ is assigned to RU $j$, and $0$, otherwise.
For shortness, $X$ is the two dimensional matrix of $\left\{x_i^j\right\}$ representing RU assignment to the STAs. 

With defined notation, the total upload time $T\left(X\right) $ of existing flows differs from $T_{step1}$ in the following way. First, the upload time of each of $n$ flows increases by  the current slot duration $\tau$. Second, if $x_i^j=1$, the remaining amount of data of flow $i$ decreases by the amount of data the STA transmits in RU $j$ of the current slot: $\Delta D_i^j = \min\left\{D_i, \tau \times r_{i}^{j}\right\}$. Thus  
\begin{equation}
T\left(X\right) = n \tau + \sum_{i = 1}^{n} \left(n - i\right) \frac{D_i -  \sum_{k = 1}^{m} x_i^j \Delta D_i^j}{r_{i}}.
\end{equation}


%Leaving out of consideration $n \tau_t$, we can say that to minimize $T\left(X\right)$ we need to sort STAs in the ascending order by $\frac{D_i -  \sum_{k = 1}^{m} x_i^j \Delta D_i^j}{r_{i}}$.

Since both $\tau$ and  $\Delta D_i^j$ depend on the resource allocation $X$, minimization of $T(X)$ requires exhaustive search by possible ways to allocate the RUs to the STAs, and to simplify the task we propose an heuristic approach based on two assumptions.
Firstly, we neglect the change of $n \tau$ for different allocations, as a slot cannot be too long due to standard limitations.
Secondly, we sort the STAs in the ascending order by $t_n$ only once, before considering different ways to assign RUs to the STAs.
Under these assumptions, to minimize  $T(X)$, we have to maximize the following expression $\sum_{k = 1}^{m} \sum_{i = 1}^{n } \left(n - i\right) \frac{x_i^j \Delta D_i^j}{r_{i}}$.

Let us denote $\lambda_i^j = \left(n - i\right) \frac{\Delta D_i^j}{r_{i}}$ and define the following optimization problem:
\begin{align}
\max \sum_{i} \sum_{j} x_i^j \lambda_i^j \\
\text{subject to} \sum_{i} x_i^j \leq 1,\ \  \forall j \\
\sum_{j} x_i^j \leq 1, \ \ \forall i \\
\sum_{i} \sum_{j} x_i^j \leq m
\end{align}
This problem\footnote{If we define $\lambda_i^j = \frac{r_i^j}{S_i}$, where $S_i$ is the amount of data transmitted by STA $i$, we obtain the optimization problem for the adaptation of the PF scheduler to 11ax.} is known as the assignment problem which can be solved in polynomial time using the Kuhn-Munkres algorithm \cite{bourgeois1971extension}.
Its solution is the assignment $\hat X$ that yields minimal $T(X)$.

Note that assignment $\hat X$ is found for a specific configuration of RUs.
To minimize upload time, we consider different ways to split the channel into RUs. For each configuration of RUs we solve the optimization problem and thus find the best assignment of the channel resources.
The examination of RU configuration can be hastened by excluding configurations that are obviously worse than the known alternatives, e.g., if we have two STAs and a \SI{20}{\MHz} channel, we consider configuration with one $106$-tone, one 52-tone and three 26-tone RUs, but exclude configuration with one $106$-tone RU and five $26$-tone RUs.

\section{Numerical  Results}
\label{numerical}
%\subsection{Channel Model}
To evaluate the developed scheduler, we use  the well-known NS-3 simulator~\cite{ns-3}.
We have implemented the MUTAX scheduler, as well as 11ax adaptations of PF, MR and SRTF.
Since the performance of PF significantly depends on how the channel is divided into RUs, we find the best RU configuration with exhaustive search.

We run simulation in a scenario described in Section \ref{problem}.
The network operates in a 40 MHz channel at 5 GHz.
The flow sizes are drawn from truncated lognormal distribution with minimal, average and maximal values of 1 KB, 500 KB, and 5 MB, respectively. When a flow is delivered, the next flow is generated after a random delay drawn from truncated exponential distribution with minimal, average and maximal values of \SI{0.1}{\s}, \SI{0.3}{\s} and \SI{0.6}{\s}, respectively.
%\ref{ implement it 
We consider channel with no fading and the 802.11ax path-loss model for the residential scenario \cite{presentation_scenarios}.
All STAs transmit with power of 15 dBm.
The AP has a set of bounds on receive power for each MCS, and assigns each STA the maximal MCS that fits the specified bounds.
As mentioned in Section \ref{mainfeatures}, the MCS assigned to a STA can differ depending on the RU width.
%\begin{align*}
%PL(d) &= 40.05 + 20 log_{10}(\frac{f_c}{2.4}) + 20 log_{10}(min(d, 5)) + \\
%&+ \mathbb{I}(d > 5) 35 log_{10}(\frac{d}{5}),
%\end{align*}
%where $PL$ is the path-loss in dB, $f_c$ is the central frequency in GHz, $d$ is the distance between the devices and $\mathbb{I}{x}$ equals $1$ if $x$ is true and $0$ otherwise.
%The AP receives the signal from the STAs with power $P(d)$ calculated as
%\[P(d) = P_0 + 10 log_{10}(\frac{F}{F_{max}}) - PL(d),\]
%where $P_0$ is the STA's transmission power, $d$ is the distance between the STA and the AP, $F$ is the number of tones in the RU, and $F_{max}$ is the maximal number of tones in a RU in the considered channel.

%Here the second summand expresses the fact that STAs use the same transmission power to transmit in RUs regardless of their width, and the resulting $SNR$ is higher for narrow RUs.

%\subsection{Scheduler Performance}
%Besides the developed scheduler introduces in the paper, which we denote as MUTAX (Minimization of Upload Time in 802.11AX), we consider also classical schedulers, such as Max Rate (MR), Shortest Remaining Time First (SRTF) and Proportional Fair (PF).
%MR allocates the whole channel to the STA which has the greatest transmission rate.
%SRTF allocates the whole channel to the STA which has the lowest remaining time $t_i$.
%PF allocates RUs to the STAs in a way which maximizes $\sum_{c}{n} x_n^c \frac{r_n^c}{Q_n}$, where $Q_n$ is the amount of data transmitted by the STA $n$.
%As one can see, PF perfornance also depends on the way the channel is divided into RUs, so we find the best RU configuration with exhaustive search.

In first set of experiments, the STAs are located uniformly within a small circle of radius $R = \SI{5}{\m}$ around the AP.
In such a case, the channel quality is so high that in any RU the STAs use the maximal permitted MCS.
Obviously, in this case OFDMA cannot bring any profit against SRTF, as the division of the channel without changing the MCS cannot increase the data rate, provided that the MCS can cope with the noise.
This result is supported by simulation, see Fig \ref{fig:10-e}, which shows that if the channel for all STAs is perfect, MUTAX yields the same upload time, as SRTF, and they both outperform the PF and MR schedulers by up to 30\%. 
As we consider traffic model of a closed loop system, along with the reduction of upload time MUTAX provides the increase of goodput compared to the other schedulers.

\begin{figure*}[!tb]
\centering
\includegraphics[width = 0.32\linewidth]{5-d.pdf}
\includegraphics[width = 0.32\linewidth]{5-e.pdf}
\includegraphics[width = 0.32\linewidth]{5-t.pdf}
%\caption{\label{fig:10-d} Upload Time vs Number of STAs in the small circle.}
%\end{figure*}
%
%\begin{figure}[tb]
%\centering
\vspace{-0.5em}
\caption{\label{fig:10-e}  Upload time, busy channel time ratio and goodput vs the number of STAs in the small circle.}
\vspace{-0.5em}
\end{figure*}

\begin{figure*}[!bt]
\centering
\includegraphics[width = 0.32\linewidth]{20-d.pdf}
\includegraphics[width = 0.32\linewidth]{20-e.pdf}
\includegraphics[width = 0.32\linewidth]{20-t.pdf}
%\caption{\label{fig:25-d} Upload Time vs Number of STAs in the large circle.}
%\end{figure}
%
%\begin{figure}[tb]
%\centering
\vspace{-0.5em}
\caption{\label{fig:25-e} Upload time, busy channel time ratio and goodput vs the number of STAs in the large circle.}
\vspace{-0.5em}
\end{figure*}

The second set of experiments corresponds to the case when STAs are located in a larger circle of radius $R = \SI{20}{\m}$.
Such conditions provide variety of MCSs among STAs and among RU widths, so it becomes feasible to split the channel between different users.
According to simulation results, see Fig. \ref{fig:25-e}, in this case designed to minimize upload time the classic SRTF works much worse than even 11ax adaptation of PF. At the same time, MUTAX shows 20\% lower upload time than PF. The results show that in this case the schedulers based on the exhaustive service (MR and SRTF) are  much less efficient than channel-splitting schedulers (MUTAX and PF) and the gap between them increases with the number of client STAs. %Note that MR and SRTF have a bit higher channel busy ratio than PF under higher load, since PF more intensively uses OFDMA and has lower overhead induces by headers and channel access.   
In a large circle scenario the gain in goodput of MUTAX against SRTF and MR is almost 100\%.


\section{Conclusion}
\label{conclusion}
In the paper, we have studied scheduling problem in IEEE 802.11ax networks, the standard of which is currently under development.
We show that because of 11ax OFDMA peculiarities the existing schedulers cannot be directly applied to the new technology.
Specifically, in the paper we have considered the problem of uplink scheduling which aims to minimize average upload time in a scenario with high number of active users.
We showed that depending on the scenario sometimes it is worth to use classic SRTF scheduler, while in other cases the channel should be split between several STAs in order to minimize upload time.
We develop a novel scheduler, called MUTAX, which adaptively chooses the best strategy and significantly outperforms existing popular solutions.

\bibliographystyle{IEEEtran}
\bibliography{biblio}

\end{document}
